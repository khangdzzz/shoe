import{_ as xe,a as ue}from"./Bhj883P8.js";import{_ as ve}from"./BG37-V3t.js";import{_ as be}from"./B4JXmhRH.js";import{_ as ye}from"./Bpy_qwNg.js";import{t as ge,u as we,_ as ke,a as he,F as Pe}from"./AptwwZdI.js";import{_ as Ne,a as Se,b as Ce,c as Te,d as Fe}from"./CH8tfSx4.js";import{_ as Ie,a as Ae}from"./BxxP3XPS.js";import{_ as Ee}from"./CSVlJQnp.js";import{_ as $e}from"./BrnjLzU6.js";import{_ as Ge}from"./BpgQ6pAZ.js";import{m as z,y as Ke,n as Me,r as b,z as Oe,F as l,M as De,P as Ve,g as Le,T as C,o as d,c as I,a as s,p as n,v as x,x as M,b as e,w as t,d as T,q as k,A as Re,B as Ue,C as Ye,D as B,E as H,t as O,G as Be,H as He}from"./DXU-TYV7.js";import{o as je,a as F,s as D,f as qe,b as ze}from"./DPJOVSfS.js";import{v as r,g as Je}from"./Bv21-O4O.js";import{u as Qe}from"./DG7zorIk.js";import{u as We}from"./C424268z.js";import{f as Xe}from"./DevxgbSN.js";import{L as Ze}from"./Bex4Aofp.js";import{E as j,a as q}from"./Cdk5Lu8t.js";import{_ as es}from"./DlAUqK2U.js";import"./DaKqVV-0.js";import"./BLTcmKj1.js";const ss={class:"login-page flex flex-col !h-[100vh] overflow-hidden relative"},as={class:"flex justify-between mt-[15px]"},ts={class:"form overflow-y-auto scroll"},ls={class:"flex flex-col w-[900px] gap-[25px] pb-[20px]"},ns={class:"company flex flex-col gap-5"},os={class:"flex gap-5 items-center"},is={class:"flex gap-5 items-center"},cs={class:"information flex flex-col gap-5"},rs={class:"flex gap-5 items-center"},ps={class:"flex gap-5 items-center"},ms={class:"flex flex-col gap-[15px] w-[82%]"},ds={class:"flex gap-5 items-center !m-[0px]"},fs={class:"pic-position flex gap-5 items-center w-[50%]"},_s={class:"pic-name flex items-center gap-5 w-[50%]"},xs={class:"flex gap-5 items-center !m-[0px]"},us={class:"pic-name flex items-center gap-5 w-[50%]"},vs={class:"flex flex-col gap-[15px] w-[82%]"},bs={class:"flex gap-5 items-center !m-[0px]"},ys={class:"pic-position flex gap-5 items-center w-[50%]"},gs={class:"pic-name flex items-center gap-5 w-[50%]"},ws={class:"flex gap-5 items-center !m-[0px]"},ks={class:"pic-name flex items-center gap-5 w-[50%]"},hs={class:"contact flex flex-col gap-6"},Ps={class:"flex gap-5 items-center"},Ns={class:"flex gap-5 items-center -mb-[12.5px]"},Ss={class:"flex gap-5 items-center"},Cs={class:"relative !m-[0px]"},Ts={class:"relative"},Fs={class:"flex gap-5 items-center"},Is={class:"!m-[0px]"},As={class:"flex gap-5 items-center"},Es={class:"flex gap-5 items-center"},$s={class:"flex gap-5 items-center"},Gs={class:"relative !m-[0px]"},Ks={class:"relative"},Ms={class:"relative w-[82%] !m-[0px]"},Os={class:"relative w-[82%] !m-[0px] flex gap-2 items-center"},Ds={class:"relative w-[82%] !m-[0px] flex gap-2 items-center"},Vs={class:"flex max-w-[900px] justify-between py-[20px]"},Ls={class:"flex gap-5"},Rs=z({__name:"index",setup(J){const V=Ke(),f=Me(),A=Qe(),{redirectPage:L}=We(),h=b(!1),Q=b(),P=b(!1),W=Oe(()=>{var p;return(p=V.masterData)==null?void 0:p.kaigoSoftwares}),E=b(!1),$=b(!1),N=b(!1),R=b(!1),G=b(""),X=ge(je({companyName:r(l.companyName,250),companyNameKana:r(l.companyNameKana,250,!0),companyPostCode:r(l.companyPostCode,10),companyAddress:r(l.companyAddress,250),frontPicPosition:r(l.frontPicPosition,100),frontPicFamilyName:r(l.frontPicFamilyName,100),frontPicGivenName:r(l.frontPicGivenName,100),frontPicFamilyNameKana:r(l.frontPicFamilyNameKana,100,!0),frontPicGivenNameKana:r(l.frontPicGivenNameKana,100,!0),picPosition:r(l.picPosition,100),picFamilyName:r(l.picFamilyName,100),picGivenName:r(l.picGivenName,100),picFamilyNameKana:r(l.picFamilyNameKana,100,!0),picGivenNameKana:r(l.picGivenNameKana,100,!0),phoneNumber:r(l.phoneNumber,20),email:r(l.email,250),password:Je(F(l.password)),kaigoSoftware:D(qe(De.ERR002,l.kaigoSoftware)).min(1,F(l.kaigoSoftware)),kaipokeCompanyId:r(l.kaipokeCompanyId,100),kaipokeUserId:r(l.kaipokeUserId,100),kaipokeUserPassword:D(F(l.kaipokeUserPassword)).min(1,F(l.kaipokeUserPassword)),paymentMethod:D().default(Ve.creditCard),isValidAccountTransfer:ze().default(!1).optional()})),{handleSubmit:Z,values:g,setFieldValue:ee}=we({validationSchema:X}),se=()=>{P.value=!P.value},ae=()=>{h.value=!h.value},te=async()=>{const p=g==null?void 0:g.companyPostCode;if(!p){f.setNotify({message:"郵便番号が存在しません。",type:C.error});return}$.value=!0;const a=await f.searchPostalCode(p);if(a!=null&&a.data){const{prefecture:u,city:o}=a.data,i=`${u} ${o}`;ee("companyAddress",i),Q.value=a.data}else f.setNotify({message:"郵便番号が存在しません。",type:C.error});$.value=!1};Le(()=>g==null?void 0:g.isValidAccountTransfer,()=>{G.value=Xe(new Date().toString(),"YYYY-MM-DD HH:mm:ss")});const U=Z(async p=>{var u;f.clearNotify(),E.value=!0;const a={...p,keepLastPlanContentFlg:N.value?1:0,...p.isValidAccountTransfer&&{accountTransferValidatedAt:G.value}};await A.createNewCompany(a),E.value=!1,(u=f.notify)!=null&&u.message||le("顧客情報を登録しました")},({errors:p})=>{const u=Object.keys(l).map(o=>p[o]).find(Boolean)??"";f.setNotify({message:u,type:C.error})}),le=p=>{R.value=!0,L("/customer"),f.setNotify({message:p,type:C.success})};return(p,a)=>{const u=xe,o=ve,i=be,K=ye,S=ue,y=ke,_=he,v=Pe,ne=Ne,oe=Se,ie=Ce,ce=Te,re=Fe,pe=Ie,me=Ae,de=Ee,fe=$e,_e=Ge;return d(),I("div",ss,[s("div",as,[n(R)?M("",!0):(d(),x(u,{key:0,class:"pl-[64px]"}))]),s("form",{class:"register flex flex-col gap-[25px] pl-[64px] pt-[10px] pb-[15px]",onSubmit:a[2]||(a[2]=(...c)=>n(U)&&n(U)(...c))},[s("div",ts,[s("div",ls,[e(o,{label:"必須項目です",position:"left",class:"mb-[10px]"}),s("div",ns,[s("div",os,[e(o,{label:"法人名",class:"w-[160px] flex-shrink-0"}),e(i,{"name-bind":"companyName"})]),s("div",is,[e(o,{label:"フリガナ",class:"w-[160px] flex-shrink-0"}),e(i,{"name-bind":"companyNameKana"})])]),a[17]||(a[17]=s("div",{class:"space"},null,-1)),s("div",cs,[s("div",rs,[e(o,{label:"郵便番号",class:"w-[160px] flex"}),e(i,{"name-bind":"companyPostCode","class-form":"w-[20%]"}),e(K,{onClick:te,type:"button",variant:"cancel_btn",class:"!m-[0px] !rounded-3xl"},{default:t(()=>[n($)?(d(),x(n(Ze),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):M("",!0),a[3]||(a[3]=T(" 郵便番号から入力 "))]),_:1})]),s("div",ps,[e(o,{label:"会社所在地",class:"w-[160px] flex-shrink-0"}),e(i,{"name-bind":"companyAddress"})]),e(v,{name:"frontPicPosition"},{default:t(({componentField:c,errors:m})=>[e(_,{class:"flex gap-5"},{default:t(()=>[e(o,{label:"代表者",class:"w-[160px] flex pt-[14px] items-baseline flex-shrink-0"}),s("div",ms,[s("div",ds,[s("div",fs,[a[4]||(a[4]=s("span",{class:"label w-[35px]"},"役職",-1)),e(y,null,{default:t(()=>[e(S,k({type:"text"},c,{class:{"border-red-500":m.length}}),null,16,["class"])]),_:2},1024)]),s("div",_s,[a[5]||(a[5]=s("span",{class:"label flex w-[19%] flex-shrink-0"},"お名前",-1)),e(i,{"name-bind":"frontPicFamilyName",placeholder:"姓","class-input":"text-center"}),e(i,{"name-bind":"frontPicGivenName",placeholder:"名","class-input":"text-center"})])]),s("div",xs,[a[7]||(a[7]=s("div",{class:"pic-position flex gap-5 items-center w-[50%]"},null,-1)),s("div",us,[a[6]||(a[6]=s("span",{class:"label flex w-[19%] flex-shrink-0"},"フリガナ",-1)),e(i,{"name-bind":"frontPicFamilyNameKana",placeholder:"せい","class-input":"text-center"}),e(i,{"name-bind":"frontPicGivenNameKana",placeholder:"めい","class-input":"text-center"})])])])]),_:2},1024)]),_:1}),e(v,{name:"picPosition"},{default:t(({componentField:c,errors:m})=>[e(_,{class:"flex gap-5"},{default:t(()=>[e(o,{label:"ご担当者",class:"w-[160px] flex pt-[14px] items-baseline flex-shrink-0"}),s("div",vs,[s("div",bs,[s("div",ys,[a[8]||(a[8]=s("span",{class:"label w-[35px]"},"役職",-1)),e(y,null,{default:t(()=>[e(S,k({type:"text"},c,{class:{"border-red-500":m.length}}),null,16,["class"])]),_:2},1024)]),s("div",gs,[a[9]||(a[9]=s("span",{class:"label flex w-[19%] flex-shrink-0"},"お名前",-1)),e(i,{"name-bind":"picFamilyName",placeholder:"姓","class-input":"text-center"}),e(i,{"name-bind":"picGivenName",placeholder:"名","class-input":"text-center"})])]),s("div",ws,[a[11]||(a[11]=s("div",{class:"pic-position flex gap-5 items-center w-[50%]"},null,-1)),s("div",ks,[a[10]||(a[10]=s("span",{class:"label flex w-[19%] flex-shrink-0"},"フリガナ",-1)),e(i,{"name-bind":"picFamilyNameKana",placeholder:"せい","class-input":"text-center"}),e(i,{"name-bind":"picGivenNameKana",placeholder:"めい","class-input":"text-center"})])])])]),_:2},1024)]),_:1})]),a[18]||(a[18]=s("div",{class:"space"},null,-1)),s("div",hs,[s("div",Ps,[e(o,{label:"電話番号",class:"w-[160px] flex-shrink-0"}),e(i,{"name-bind":"phoneNumber","class-form":"w-[40%]"})]),s("div",Ns,[e(o,{label:"メールアドレス",class:"w-[160px] flex-shrink-0"}),e(i,{"name-bind":"email"})]),s("div",Ss,[a[12]||(a[12]=s("div",{class:"w-[160px] flex-shrink-0"},[s("span",null,"パスワード")],-1)),e(v,{name:"password"},{default:t(({componentField:c,errors:m})=>[e(_,{class:"w-[100%]"},{default:t(()=>[s("div",Cs,[e(y,null,{default:t(()=>[s("div",Ts,[e(S,k({type:n(h)?"text":"password"},c,{placeholder:"英小文字、数字を含む、半角英数字８文字以上",class:[{"border-red-500":m.length},"placeholder:text-[10px]"]}),null,16,["type","class"]),s("button",{type:"button",class:"absolute right-[15px] top-1/2 transform -translate-y-1/2",onClick:ae,"aria-label":"Toggle password visibility"},[n(h)?(d(),x(n(q),{key:1,class:"h-5 w-3.5 text-black"})):(d(),x(n(j),{key:0,class:"h-5 w-3.5 text-black"}))])])]),_:2},1024)])]),_:2},1024)]),_:1})]),s("div",Fs,[e(o,{label:"介護ソフト選択",class:"w-[160px] flex-shrink-0"}),e(v,{name:"kaigoSoftware"},{default:t(({componentField:c,errors:m,meta:w})=>[e(_,{class:"w-[100%]"},{default:t(()=>[s("div",Is,[e(y,null,{default:t(()=>[e(re,Re(Ue(c)),{default:t(()=>[e(oe,{class:Ye({"border-red-500":m.length&&!c.modelValue})},{default:t(()=>[e(ne,{placeholder:"Select an option"})]),_:2},1032,["class"]),e(ce,null,{default:t(()=>[(d(!0),I(B,null,H(n(W),Y=>(d(),x(ie,{value:`${Y.id}`},{default:t(()=>[T(O(Y.name),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:2},1040)]),_:2},1024)])]),_:2},1024)]),_:1})]),s("div",As,[e(o,{label:"カイポケ法人ID",class:"w-[160px] flex-shrink-0"}),e(i,{"name-bind":"kaipokeCompanyId"})]),s("div",Es,[e(o,{label:"カイポケユーザーID",class:"w-[160px] flex-shrink-0"}),e(i,{"name-bind":"kaipokeUserId"})]),s("div",$s,[e(o,{label:"カイポケパスワード",class:"w-[160px] flex-shrink-0"}),e(v,{name:"kaipokeUserPassword"},{default:t(({componentField:c,errors:m})=>[e(_,{class:"w-[100%]"},{default:t(()=>[s("div",Gs,[e(y,null,{default:t(()=>[s("div",Ks,[e(S,k({type:n(P)?"text":"password"},c,{placeholder:"英小文字、数字を含む、半角英数字８文字以上",class:[{"border-red-500":m.length},"placeholder:text-[10px]"]}),null,16,["type","class"]),s("button",{type:"button",class:"absolute right-[15px] top-1/2 transform -translate-y-1/2",onClick:se,"aria-label":"Toggle password visibility"},[n(P)?(d(),x(n(q),{key:1,class:"h-5 w-3.5 text-black"})):(d(),x(n(j),{key:0,class:"h-5 w-3.5 text-black"}))])])]),_:2},1024)])]),_:2},1024)]),_:1})]),e(v,{name:"paymentMethod"},{default:t(({componentField:c,errors:m})=>[e(_,{class:"flex gap-5"},{default:t(()=>[e(o,{label:"決済方法",class:"w-[160px] flex-shrink-0"}),s("div",Ms,[e(y,null,{default:t(()=>[e(me,k({class:"flex gap-5"},c),{default:t(()=>[(d(!0),I(B,null,H("PAYMENT_METHOD_OPTIONS_LIST"in p?p.PAYMENT_METHOD_OPTIONS_LIST:n(Be),w=>(d(),x(_,{class:"flex items-center space-y-0 gap-x-3"},{default:t(()=>[e(y,null,{default:t(()=>[e(pe,{value:w.type},null,8,["value"])]),_:2},1024),s("span",null,O(w.value),1)]),_:2},1024))),256))]),_:2},1040)]),_:2},1024)])]),_:2},1024)]),_:1}),e(v,{type:"checkbox",name:"isValidAccountTransfer"},{default:t(({value:c,handleChange:m})=>[e(_,{class:"flex gap-5"},{default:t(()=>[a[13]||(a[13]=s("span",{class:"w-[160px] flex items-center"},"口座有効",-1)),s("div",Os,[e(de,{checked:c,"onUpdate:checked":m},null,8,["checked","onUpdate:checked"]),s("span",null,O(n(G)||""),1)])]),_:2},1024)]),_:1}),e(v,{name:"remainOldPlan"},{default:t(({componentField:c,errors:m})=>[e(_,{class:"flex gap-5"},{default:t(()=>[a[16]||(a[16]=s("span",{class:"w-[160px] flex items-center"},"前回の計画書内容を保持する",-1)),s("div",Ds,[a[14]||(a[14]=s("span",null,"OFF",-1)),e(fe,{checked:n(N),"onUpdate:checked":a[0]||(a[0]=w=>He(N)?N.value=w:null)},null,8,["checked"]),a[15]||(a[15]=s("span",null,"ON",-1))])]),_:1})]),_:1})])])]),s("div",Vs,[s("div",Ls,[e(K,{type:"button",variant:"cancel_btn",class:"flex self-center",onClick:a[1]||(a[1]=c=>n(L)("/customer"))},{default:t(()=>a[19]||(a[19]=[T(" キャンセル ")])),_:1}),e(K,{variant:"export",class:"delete flex self-center"},{default:t(()=>a[20]||(a[20]=[T(" 登録 ")])),_:1})])])],32),n(E)?(d(),x(_e,{key:0})):M("",!0)])}}}),Us=es(Rs,[["__scopeId","data-v-35ee6b6b"]]),Ys={class:"user-list px-4"},ma=z({__name:"index",setup(J){return(V,f)=>{const A=Us;return d(),I("div",Ys,[f[0]||(f[0]=s("div",{class:"header flex items-center h-[40px] border-b border-b-[#e2e2e2]"},[s("span",{class:"text-base font-bold"},"顧客管理")],-1)),e(A)])}}});export{ma as default};
