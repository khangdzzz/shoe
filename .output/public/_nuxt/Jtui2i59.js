import{t as j,o as q,s as h,f as C,u as A,F as D,L as G,_ as z,a as H,b as J,c as K}from"./BSo77fPl.js";import{_ as Q}from"./DWuNjeID.js";import{_ as U}from"./C5c0A0Ah.js";import{m as W,B as X,p as Y,u as Z,n as ss,r as d,D as ts,N as es,M as i,c as os,a as e,b as t,q as o,w as a,F as E,o as l,v as R,x as m,y as as,d as F}from"./y0evPSAL.js";import{E as V,a as $}from"./BP5fTaPr.js";import"./aAcqrNDs.js";import"./Bgy5XPsR.js";const ns={class:"login-page flex flex-col items-center justify-center h-[100vh]"},ls={class:"flex flex-col min-w-[500px] bg-white px-12 py-8"},rs={class:"relative"},is={class:"relative"},bs=W({__name:"index",setup(ms){const B=X(),x=Y(),M=Z(),T=ss(),_=B.query.token,u=d(!1),L=ts(()=>T.errors);es(()=>{_||x.push("/login")});const p=d(!1),c=d(!1),N=()=>{p.value=!p.value},P=()=>{c.value=!c.value},I=j(q({password:h(C(i.ERR001,E.password)).min(8,{message:i.ERR007}).max(50),passwordConfirmation:h(C(i.ERR001,E.confirmPassword)).min(8,{message:i.ERR007}).max(50)}).refine(({password:r,passwordConfirmation:s})=>r===s,{message:i.ERR006,path:["passwordConfirmation"]})),{handleSubmit:O}=A({validationSchema:I}),b=O(async r=>{var f;u.value=!0;const{password:s}=r;await M.resetPassword(s,_),(f=L.value)!=null&&f.message||x.push("/confirm-email-change-password"),u.value=!1});return(r,s)=>{const f=z,w=Q,y=H,g=J,v=K,k=D,S=U;return l(),os("div",ns,[s[8]||(s[8]=e("div",{class:"logo"},"LOGO",-1)),e("div",ls,[t(f),s[6]||(s[6]=e("h1",{class:"text-sm font-bold mb-[30px]"},"メール送信完了",-1)),s[7]||(s[7]=e("div",{class:"flex flex-col gap-2 mb-[30px]"},[e("p",{class:"text-xs"},"パスワードは英小文字、数字を含む、半角英数字８文字以上を設定してください。")],-1)),e("form",{class:"flex flex-col gap-[30px]",onSubmit:s[1]||(s[1]=(...n)=>o(b)&&o(b)(...n))},[t(k,{name:"password"},{default:a(({componentField:n})=>[t(v,{class:"relative"},{default:a(()=>[s[2]||(s[2]=e("span",{class:"font-medium"},"パスワード",-1)),t(y,null,{default:a(()=>[e("div",rs,[t(w,R({type:o(p)?"text":"password",placeholder:"パスワード"},n),null,16,["type"]),e("button",{type:"button",class:"absolute right-[15px] top-1/2 transform -translate-y-1/2",onClick:N,"aria-label":"Toggle password visibility"},[o(p)?(l(),m(o($),{key:1,class:"h-5 w-3.5 text-black"})):(l(),m(o(V),{key:0,class:"h-5 w-3.5 text-black"}))])])]),_:2},1024),t(g,{class:"absolute top-full left-0 mt-1 text-red-500 !m-[0px] !text-[12px] font-normal"})]),_:2},1024)]),_:1}),t(k,{name:"passwordConfirmation"},{default:a(({componentField:n})=>[t(v,{class:"relative"},{default:a(()=>[s[3]||(s[3]=e("span",{class:"font-medium"},"パスワード（確認用）",-1)),t(y,null,{default:a(()=>[e("div",is,[t(w,R({type:o(c)?"text":"password",placeholder:"パスワード（確認用）"},n),null,16,["type"]),e("button",{type:"button",class:"absolute right-[15px] top-1/2 transform -translate-y-1/2",onClick:P,"aria-label":"Toggle password visibility"},[o(c)?(l(),m(o($),{key:1,class:"h-5 w-3.5 text-black"})):(l(),m(o(V),{key:0,class:"h-5 w-3.5 text-black"}))])]),t(g,{class:"absolute top-full left-0 mt-1 text-red-500 !m-[0px] !text-[12px] font-normal"})]),_:2},1024)]),_:2},1024)]),_:1}),t(S,{type:"submit",class:"flex self-center w-[132px]"},{default:a(()=>[o(u)?(l(),m(o(G),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):as("",!0),s[4]||(s[4]=F(" 保存 "))]),_:1}),t(S,{class:"w-[132px]",variant:"cancel_btn",onClick:s[0]||(s[0]=n=>r.$router.push("/login"))},{default:a(()=>s[5]||(s[5]=[F(" キャンセル ")])),_:1})],32)])])}}});export{bs as default};
