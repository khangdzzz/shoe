import{_ as Lt,a as At,b as Pt,d as jt,e as Ot,f as Rt,c as An}from"./D8PxuFW5.js";import{h as $e,c as Pn}from"./BnZ1PWnj.js";import{m as V,z as O,o as T,v as N,w as x,K as fe,q as Nt,p as d,n as Se,r as w,g as H,J as pe,h as jn,b as v,d as K,H as te,aa as mt,S as Le,c as P,D as oe,E as re,a as h,t as R,C as G,A as Fe,B as Ye,L as On,Y as we,X as Ee,x as Q,N as Rn,ac as ht,R as Bt,ad as Nn,ae as gt,af as Bn,M as Un,U as ee,ag as Fn,_ as Yn}from"./CVo18i-A.js";import{u as Hn}from"./D-3lVXFW.js";import{S as Ae,a as Vn,_ as zn}from"./CiaHXWUO.js";import{c as Ut,a as Kn,N as qn,L as Gn,z as Jn,j as Qn,G as Wn,U as Xn,H as Zn,q as es,Y as ts,F as ns,x as Ft,k as ss,V as os,b as rs,M as as,O as ls,_ as Yt}from"./DJtxh8aN.js";import{_ as ae}from"./DlAUqK2U.js";import{g as is,C as cs,j as us,V as ds,f as ye,S as fs,_ as ps,A as ms,a as hs,b as gs}from"./BloYC2aY.js";import{C as ys}from"./C__Sd1J9.js";import{C as vs}from"./C_CcoaO5.js";import{L as Ht}from"./CP67L0VG.js";import{_ as bs}from"./Bz0IhU0E.js";import{_ as _s,a as xs,b as Ss,c as ws,d as Cs}from"./kXvj492t.js";import{_ as ks}from"./CfqcDDi6.js";import{_ as Ts}from"./0CM6wDat.js";import"./CceRl4gH.js";import"./Bs-ktE0X.js";const Is=V({__name:"AlertDialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const n=e,s=O(()=>{const{class:o,...t}=n;return t});return(o,t)=>(T(),N(d(Kn),Nt(s.value,{class:d(Ut)("text-sm text-muted-foreground",n.class)}),{default:x(()=>[fe(o.$slots,"default")]),_:3},16,["class"]))}}),Es=V({__name:"notify-register-payment",setup(e){const n=Se(),{redirectPage:s}=Hn(),o=w(!1),t=O(()=>n.isLoadPermission);H(t,()=>{o.value=!$e()});const r=()=>{o.value=!1,s("/mypage")};pe(()=>{setTimeout(()=>{o.value=!$e()},200),window.addEventListener("keydown",a)}),jn(()=>{window.removeEventListener("keydown",a)});const a=l=>{l.key==="Escape"&&o.value&&(l.stopPropagation(),l.preventDefault())};return(l,i)=>{const c=Lt,p=At,_=Pt,y=jt,g=Ot,C=Rt;return T(),N(C,{open:d(o),"onUpdate:open":i[0]||(i[0]=b=>te(o)?o.value=b:null)},{default:x(()=>[v(g,null,{default:x(()=>[v(p,{class:"flex flex-col gap-4 items-center"},{default:x(()=>[v(c,{class:"text-sm"},{default:x(()=>i[1]||(i[1]=[K("決済方法は設定完了していないので、マイページより設定完了してください。")])),_:1})]),_:1}),v(y,{class:"flex !flex-col gap-4"},{default:x(()=>[v(_,{class:"flex self-center min-w-[120px]",onClick:r},{default:x(()=>i[2]||(i[2]=[K("登録")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}}),ce=/^[a-z0-9]+(-[a-z0-9]+)*$/,Ce=(e,n,s,o="")=>{const t=e.split(":");if(e.slice(0,1)==="@"){if(t.length<2||t.length>3)return null;o=t.shift().slice(1)}if(t.length>3||!t.length)return null;if(t.length>1){const l=t.pop(),i=t.pop(),c={provider:t.length>0?t[0]:o,prefix:i,name:l};return n&&!ve(c)?null:c}const r=t[0],a=r.split("-");if(a.length>1){const l={provider:o,prefix:a.shift(),name:a.join("-")};return n&&!ve(l)?null:l}if(s&&o===""){const l={provider:o,prefix:"",name:r};return n&&!ve(l,s)?null:l}return null},ve=(e,n)=>e?!!((e.provider===""||e.provider.match(ce))&&(n&&e.prefix===""||e.prefix.match(ce))&&e.name.match(ce)):!1,Vt=Object.freeze({left:0,top:0,width:16,height:16}),xe=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),ke=Object.freeze({...Vt,...xe}),Pe=Object.freeze({...ke,body:"",hidden:!1});function Ds(e,n){const s={};!e.hFlip!=!n.hFlip&&(s.hFlip=!0),!e.vFlip!=!n.vFlip&&(s.vFlip=!0);const o=((e.rotate||0)+(n.rotate||0))%4;return o&&(s.rotate=o),s}function yt(e,n){const s=Ds(e,n);for(const o in Pe)o in xe?o in e&&!(o in s)&&(s[o]=xe[o]):o in n?s[o]=n[o]:o in e&&(s[o]=e[o]);return s}function Ms(e,n){const s=e.icons,o=e.aliases||Object.create(null),t=Object.create(null);function r(a){if(s[a])return t[a]=[];if(!(a in t)){t[a]=null;const l=o[a]&&o[a].parent,i=l&&r(l);i&&(t[a]=[l].concat(i))}return t[a]}return Object.keys(s).concat(Object.keys(o)).forEach(r),t}function $s(e,n,s){const o=e.icons,t=e.aliases||Object.create(null);let r={};function a(l){r=yt(o[l]||t[l],r)}return a(n),s.forEach(a),yt(e,r)}function zt(e,n){const s=[];if(typeof e!="object"||typeof e.icons!="object")return s;e.not_found instanceof Array&&e.not_found.forEach(t=>{n(t,null),s.push(t)});const o=Ms(e);for(const t in o){const r=o[t];r&&(n(t,$s(e,t,r)),s.push(t))}return s}const Ls={provider:"",aliases:{},not_found:{},...Vt};function De(e,n){for(const s in n)if(s in e&&typeof e[s]!=typeof n[s])return!1;return!0}function Kt(e){if(typeof e!="object"||e===null)return null;const n=e;if(typeof n.prefix!="string"||!e.icons||typeof e.icons!="object"||!De(e,Ls))return null;const s=n.icons;for(const t in s){const r=s[t];if(!t.match(ce)||typeof r.body!="string"||!De(r,Pe))return null}const o=n.aliases||Object.create(null);for(const t in o){const r=o[t],a=r.parent;if(!t.match(ce)||typeof a!="string"||!s[a]&&!o[a]||!De(r,Pe))return null}return n}const vt=Object.create(null);function As(e,n){return{provider:e,prefix:n,icons:Object.create(null),missing:new Set}}function se(e,n){const s=vt[e]||(vt[e]=Object.create(null));return s[n]||(s[n]=As(e,n))}function He(e,n){return Kt(n)?zt(n,(s,o)=>{o?e.icons[s]=o:e.missing.add(s)}):[]}function Ps(e,n,s){try{if(typeof s.body=="string")return e.icons[n]={...s},!0}catch{}return!1}let ue=!1;function qt(e){return typeof e=="boolean"&&(ue=e),ue}function js(e){const n=typeof e=="string"?Ce(e,!0,ue):e;if(n){const s=se(n.provider,n.prefix),o=n.name;return s.icons[o]||(s.missing.has(o)?null:void 0)}}function Os(e,n){const s=Ce(e,!0,ue);if(!s)return!1;const o=se(s.provider,s.prefix);return Ps(o,s.name,n)}function Rs(e,n){if(typeof e!="object")return!1;if(typeof n!="string"&&(n=e.provider||""),ue&&!n&&!e.prefix){let t=!1;return Kt(e)&&(e.prefix="",zt(e,(r,a)=>{a&&Os(r,a)&&(t=!0)})),t}const s=e.prefix;if(!ve({provider:n,prefix:s,name:"a"}))return!1;const o=se(n,s);return!!He(o,e)}const Gt=Object.freeze({width:null,height:null}),Jt=Object.freeze({...Gt,...xe}),Ns=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Bs=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function bt(e,n,s){if(n===1)return e;if(s=s||100,typeof e=="number")return Math.ceil(e*n*s)/s;if(typeof e!="string")return e;const o=e.split(Ns);if(o===null||!o.length)return e;const t=[];let r=o.shift(),a=Bs.test(r);for(;;){if(a){const l=parseFloat(r);isNaN(l)?t.push(r):t.push(Math.ceil(l*n*s)/s)}else t.push(r);if(r=o.shift(),r===void 0)return t.join("");a=!a}}function Us(e,n="defs"){let s="";const o=e.indexOf("<"+n);for(;o>=0;){const t=e.indexOf(">",o),r=e.indexOf("</"+n);if(t===-1||r===-1)break;const a=e.indexOf(">",r);if(a===-1)break;s+=e.slice(t+1,r).trim(),e=e.slice(0,o).trim()+e.slice(a+1)}return{defs:s,content:e}}function Fs(e,n){return e?"<defs>"+e+"</defs>"+n:n}function Ys(e,n,s){const o=Us(e);return Fs(o.defs,n+o.content+s)}const Hs=e=>e==="unset"||e==="undefined"||e==="none";function Vs(e,n){const s={...ke,...e},o={...Jt,...n},t={left:s.left,top:s.top,width:s.width,height:s.height};let r=s.body;[s,o].forEach(b=>{const m=[],A=b.hFlip,$=b.vFlip;let L=b.rotate;A?$?L+=2:(m.push("translate("+(t.width+t.left).toString()+" "+(0-t.top).toString()+")"),m.push("scale(-1 1)"),t.top=t.left=0):$&&(m.push("translate("+(0-t.left).toString()+" "+(t.height+t.top).toString()+")"),m.push("scale(1 -1)"),t.top=t.left=0);let B;switch(L<0&&(L-=Math.floor(L/4)*4),L=L%4,L){case 1:B=t.height/2+t.top,m.unshift("rotate(90 "+B.toString()+" "+B.toString()+")");break;case 2:m.unshift("rotate(180 "+(t.width/2+t.left).toString()+" "+(t.height/2+t.top).toString()+")");break;case 3:B=t.width/2+t.left,m.unshift("rotate(-90 "+B.toString()+" "+B.toString()+")");break}L%2===1&&(t.left!==t.top&&(B=t.left,t.left=t.top,t.top=B),t.width!==t.height&&(B=t.width,t.width=t.height,t.height=B)),m.length&&(r=Ys(r,'<g transform="'+m.join(" ")+'">',"</g>"))});const a=o.width,l=o.height,i=t.width,c=t.height;let p,_;a===null?(_=l===null?"1em":l==="auto"?c:l,p=bt(_,i/c)):(p=a==="auto"?i:a,_=l===null?bt(p,c/i):l==="auto"?c:l);const y={},g=(b,m)=>{Hs(m)||(y[b]=m.toString())};g("width",p),g("height",_);const C=[t.left,t.top,i,c];return y.viewBox=C.join(" "),{attributes:y,viewBox:C,body:r}}const zs=/\sid="(\S+)"/g,Ks="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let qs=0;function Gs(e,n=Ks){const s=[];let o;for(;o=zs.exec(e);)s.push(o[1]);if(!s.length)return e;const t="suffix"+(Math.random()*16777216|Date.now()).toString(16);return s.forEach(r=>{const a=typeof n=="function"?n(r):n+(qs++).toString(),l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+l+')([")]|\\.[a-z])',"g"),"$1"+a+t+"$3")}),e=e.replace(new RegExp(t,"g"),""),e}const je=Object.create(null);function Js(e,n){je[e]=n}function Oe(e){return je[e]||je[""]}function Ve(e){let n;if(typeof e.resources=="string")n=[e.resources];else if(n=e.resources,!(n instanceof Array)||!n.length)return null;return{resources:n,path:e.path||"/",maxURL:e.maxURL||500,rotate:e.rotate||750,timeout:e.timeout||5e3,random:e.random===!0,index:e.index||0,dataAfterTimeout:e.dataAfterTimeout!==!1}}const ze=Object.create(null),ie=["https://api.simplesvg.com","https://api.unisvg.com"],be=[];for(;ie.length>0;)ie.length===1||Math.random()>.5?be.push(ie.shift()):be.push(ie.pop());ze[""]=Ve({resources:["https://api.iconify.design"].concat(be)});function Qs(e,n){const s=Ve(n);return s===null?!1:(ze[e]=s,!0)}function Ke(e){return ze[e]}const Ws=()=>{let e;try{if(e=fetch,typeof e=="function")return e}catch{}};let _t=Ws();function Xs(e,n){const s=Ke(e);if(!s)return 0;let o;if(!s.maxURL)o=0;else{let t=0;s.resources.forEach(a=>{t=Math.max(t,a.length)});const r=n+".json?icons=";o=s.maxURL-t-s.path.length-r.length}return o}function Zs(e){return e===404}const eo=(e,n,s)=>{const o=[],t=Xs(e,n),r="icons";let a={type:r,provider:e,prefix:n,icons:[]},l=0;return s.forEach((i,c)=>{l+=i.length+1,l>=t&&c>0&&(o.push(a),a={type:r,provider:e,prefix:n,icons:[]},l=i.length),a.icons.push(i)}),o.push(a),o};function to(e){if(typeof e=="string"){const n=Ke(e);if(n)return n.path}return"/"}const no=(e,n,s)=>{if(!_t){s("abort",424);return}let o=to(n.provider);switch(n.type){case"icons":{const r=n.prefix,l=n.icons.join(","),i=new URLSearchParams({icons:l});o+=r+".json?"+i.toString();break}case"custom":{const r=n.uri;o+=r.slice(0,1)==="/"?r.slice(1):r;break}default:s("abort",400);return}let t=503;_t(e+o).then(r=>{const a=r.status;if(a!==200){setTimeout(()=>{s(Zs(a)?"abort":"next",a)});return}return t=501,r.json()}).then(r=>{if(typeof r!="object"||r===null){setTimeout(()=>{r===404?s("abort",r):s("next",t)});return}setTimeout(()=>{s("success",r)})}).catch(()=>{s("next",t)})},so={prepare:eo,send:no};function oo(e){const n={loaded:[],missing:[],pending:[]},s=Object.create(null);e.sort((t,r)=>t.provider!==r.provider?t.provider.localeCompare(r.provider):t.prefix!==r.prefix?t.prefix.localeCompare(r.prefix):t.name.localeCompare(r.name));let o={provider:"",prefix:"",name:""};return e.forEach(t=>{if(o.name===t.name&&o.prefix===t.prefix&&o.provider===t.provider)return;o=t;const r=t.provider,a=t.prefix,l=t.name,i=s[r]||(s[r]=Object.create(null)),c=i[a]||(i[a]=se(r,a));let p;l in c.icons?p=n.loaded:a===""||c.missing.has(l)?p=n.missing:p=n.pending;const _={provider:r,prefix:a,name:l};p.push(_)}),n}function Qt(e,n){e.forEach(s=>{const o=s.loaderCallbacks;o&&(s.loaderCallbacks=o.filter(t=>t.id!==n))})}function ro(e){e.pendingCallbacksFlag||(e.pendingCallbacksFlag=!0,setTimeout(()=>{e.pendingCallbacksFlag=!1;const n=e.loaderCallbacks?e.loaderCallbacks.slice(0):[];if(!n.length)return;let s=!1;const o=e.provider,t=e.prefix;n.forEach(r=>{const a=r.icons,l=a.pending.length;a.pending=a.pending.filter(i=>{if(i.prefix!==t)return!0;const c=i.name;if(e.icons[c])a.loaded.push({provider:o,prefix:t,name:c});else if(e.missing.has(c))a.missing.push({provider:o,prefix:t,name:c});else return s=!0,!0;return!1}),a.pending.length!==l&&(s||Qt([e],r.id),r.callback(a.loaded.slice(0),a.missing.slice(0),a.pending.slice(0),r.abort))})}))}let ao=0;function lo(e,n,s){const o=ao++,t=Qt.bind(null,s,o);if(!n.pending.length)return t;const r={id:o,icons:n,callback:e,abort:t};return s.forEach(a=>{(a.loaderCallbacks||(a.loaderCallbacks=[])).push(r)}),t}function io(e,n=!0,s=!1){const o=[];return e.forEach(t=>{const r=typeof t=="string"?Ce(t,n,s):t;r&&o.push(r)}),o}var co={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function uo(e,n,s,o){const t=e.resources.length,r=e.random?Math.floor(Math.random()*t):e.index;let a;if(e.random){let E=e.resources.slice(0);for(a=[];E.length>1;){const U=Math.floor(Math.random()*E.length);a.push(E[U]),E=E.slice(0,U).concat(E.slice(U+1))}a=a.concat(E)}else a=e.resources.slice(r).concat(e.resources.slice(0,r));const l=Date.now();let i="pending",c=0,p,_=null,y=[],g=[];typeof o=="function"&&g.push(o);function C(){_&&(clearTimeout(_),_=null)}function b(){i==="pending"&&(i="aborted"),C(),y.forEach(E=>{E.status==="pending"&&(E.status="aborted")}),y=[]}function m(E,U){U&&(g=[]),typeof E=="function"&&g.push(E)}function A(){return{startTime:l,payload:n,status:i,queriesSent:c,queriesPending:y.length,subscribe:m,abort:b}}function $(){i="failed",g.forEach(E=>{E(void 0,p)})}function L(){y.forEach(E=>{E.status==="pending"&&(E.status="aborted")}),y=[]}function B(E,U,J){const q=U!=="success";switch(y=y.filter(z=>z!==E),i){case"pending":break;case"failed":if(q||!e.dataAfterTimeout)return;break;default:return}if(U==="abort"){p=J,$();return}if(q){p=J,y.length||(a.length?W():$());return}if(C(),L(),!e.random){const z=e.resources.indexOf(E.resource);z!==-1&&z!==e.index&&(e.index=z)}i="completed",g.forEach(z=>{z(J)})}function W(){if(i!=="pending")return;C();const E=a.shift();if(E===void 0){if(y.length){_=setTimeout(()=>{C(),i==="pending"&&(L(),$())},e.timeout);return}$();return}const U={status:"pending",resource:E,callback:(J,q)=>{B(U,J,q)}};y.push(U),c++,_=setTimeout(W,e.rotate),s(E,n,U.callback)}return setTimeout(W),A}function Wt(e){const n={...co,...e};let s=[];function o(){s=s.filter(l=>l().status==="pending")}function t(l,i,c){const p=uo(n,l,i,(_,y)=>{o(),c&&c(_,y)});return s.push(p),p}function r(l){return s.find(i=>l(i))||null}return{query:t,find:r,setIndex:l=>{n.index=l},getIndex:()=>n.index,cleanup:o}}function xt(){}const Me=Object.create(null);function fo(e){if(!Me[e]){const n=Ke(e);if(!n)return;const s=Wt(n),o={config:n,redundancy:s};Me[e]=o}return Me[e]}function po(e,n,s){let o,t;if(typeof e=="string"){const r=Oe(e);if(!r)return s(void 0,424),xt;t=r.send;const a=fo(e);a&&(o=a.redundancy)}else{const r=Ve(e);if(r){o=Wt(r);const a=e.resources?e.resources[0]:"",l=Oe(a);l&&(t=l.send)}}return!o||!t?(s(void 0,424),xt):o.query(n,t,s)().abort}const St="iconify2",de="iconify",Xt=de+"-count",wt=de+"-version",Zt=36e5,mo=168,ho=50;function Re(e,n){try{return e.getItem(n)}catch{}}function qe(e,n,s){try{return e.setItem(n,s),!0}catch{}}function Ct(e,n){try{e.removeItem(n)}catch{}}function Ne(e,n){return qe(e,Xt,n.toString())}function Be(e){return parseInt(Re(e,Xt))||0}const Te={local:!0,session:!0},en={local:new Set,session:new Set};let Ge=!1;function go(e){Ge=e}let ge=typeof window>"u"?{}:window;function tn(e){const n=e+"Storage";try{if(ge&&ge[n]&&typeof ge[n].length=="number")return ge[n]}catch{}Te[e]=!1}function nn(e,n){const s=tn(e);if(!s)return;const o=Re(s,wt);if(o!==St){if(o){const l=Be(s);for(let i=0;i<l;i++)Ct(s,de+i.toString())}qe(s,wt,St),Ne(s,0);return}const t=Math.floor(Date.now()/Zt)-mo,r=l=>{const i=de+l.toString(),c=Re(s,i);if(typeof c=="string"){try{const p=JSON.parse(c);if(typeof p=="object"&&typeof p.cached=="number"&&p.cached>t&&typeof p.provider=="string"&&typeof p.data=="object"&&typeof p.data.prefix=="string"&&n(p,l))return!0}catch{}Ct(s,i)}};let a=Be(s);for(let l=a-1;l>=0;l--)r(l)||(l===a-1?(a--,Ne(s,a)):en[e].add(l))}function sn(){if(!Ge){go(!0);for(const e in Te)nn(e,n=>{const s=n.data,o=n.provider,t=s.prefix,r=se(o,t);if(!He(r,s).length)return!1;const a=s.lastModified||-1;return r.lastModifiedCached=r.lastModifiedCached?Math.min(r.lastModifiedCached,a):a,!0})}}function yo(e,n){const s=e.lastModifiedCached;if(s&&s>=n)return s===n;if(e.lastModifiedCached=n,s)for(const o in Te)nn(o,t=>{const r=t.data;return t.provider!==e.provider||r.prefix!==e.prefix||r.lastModified===n});return!0}function vo(e,n){Ge||sn();function s(o){let t;if(!Te[o]||!(t=tn(o)))return;const r=en[o];let a;if(r.size)r.delete(a=Array.from(r).shift());else if(a=Be(t),a>=ho||!Ne(t,a+1))return;const l={cached:Math.floor(Date.now()/Zt),provider:e.provider,data:n};return qe(t,de+a.toString(),JSON.stringify(l))}n.lastModified&&!yo(e,n.lastModified)||Object.keys(n.icons).length&&(n.not_found&&(n=Object.assign({},n),delete n.not_found),s("local")||s("session"))}function kt(){}function bo(e){e.iconsLoaderFlag||(e.iconsLoaderFlag=!0,setTimeout(()=>{e.iconsLoaderFlag=!1,ro(e)}))}function _o(e,n){e.iconsToLoad?e.iconsToLoad=e.iconsToLoad.concat(n).sort():e.iconsToLoad=n,e.iconsQueueFlag||(e.iconsQueueFlag=!0,setTimeout(()=>{e.iconsQueueFlag=!1;const{provider:s,prefix:o}=e,t=e.iconsToLoad;delete e.iconsToLoad;let r;if(!t||!(r=Oe(s)))return;r.prepare(s,o,t).forEach(l=>{po(s,l,i=>{if(typeof i!="object")l.icons.forEach(c=>{e.missing.add(c)});else try{const c=He(e,i);if(!c.length)return;const p=e.pendingIcons;p&&c.forEach(_=>{p.delete(_)}),vo(e,i)}catch(c){console.error(c)}bo(e)})})}))}const xo=(e,n)=>{const s=io(e,!0,qt()),o=oo(s);if(!o.pending.length){let i=!0;return n&&setTimeout(()=>{i&&n(o.loaded,o.missing,o.pending,kt)}),()=>{i=!1}}const t=Object.create(null),r=[];let a,l;return o.pending.forEach(i=>{const{provider:c,prefix:p}=i;if(p===l&&c===a)return;a=c,l=p,r.push(se(c,p));const _=t[c]||(t[c]=Object.create(null));_[p]||(_[p]=[])}),o.pending.forEach(i=>{const{provider:c,prefix:p,name:_}=i,y=se(c,p),g=y.pendingIcons||(y.pendingIcons=new Set);g.has(_)||(g.add(_),t[c][p].push(_))}),r.forEach(i=>{const{provider:c,prefix:p}=i;t[c][p].length&&_o(i,t[c][p])}),n?lo(n,o,r):kt};function So(e,n){const s={...e};for(const o in n){const t=n[o],r=typeof t;o in Gt?(t===null||t&&(r==="string"||r==="number"))&&(s[o]=t):r===typeof s[o]&&(s[o]=o==="rotate"?t%4:t)}return s}const wo=/[\s,]+/;function Co(e,n){n.split(wo).forEach(s=>{switch(s.trim()){case"horizontal":e.hFlip=!0;break;case"vertical":e.vFlip=!0;break}})}function ko(e,n=0){const s=e.replace(/^-?[0-9.]*/,"");function o(t){for(;t<0;)t+=4;return t%4}if(s===""){const t=parseInt(e);return isNaN(t)?0:o(t)}else if(s!==e){let t=0;switch(s){case"%":t=25;break;case"deg":t=90}if(t){let r=parseFloat(e.slice(0,e.length-s.length));return isNaN(r)?0:(r=r/t,r%1===0?o(r):0)}}return n}function To(e,n){let s=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const o in n)s+=" "+o+'="'+n[o]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+s+">"+e+"</svg>"}function Io(e){return e.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function Eo(e){return"data:image/svg+xml,"+Io(e)}function Do(e){return'url("'+Eo(e)+'")'}const Tt={...Jt,inline:!1},Mo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},$o={display:"inline-block"},Ue={backgroundColor:"currentColor"},on={backgroundColor:"transparent"},It={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},Et={webkitMask:Ue,mask:Ue,background:on};for(const e in Et){const n=Et[e];for(const s in It)n[e+s]=It[s]}const _e={};["horizontal","vertical"].forEach(e=>{const n=e.slice(0,1)+"Flip";_e[e+"-flip"]=n,_e[e.slice(0,1)+"-flip"]=n,_e[e+"Flip"]=n});function Dt(e){return e+(e.match(/^[-0-9.]+$/)?"px":"")}const Mt=(e,n)=>{const s=So(Tt,n),o={...Mo},t=n.mode||"svg",r={},a=n.style,l=typeof a=="object"&&!(a instanceof Array)?a:{};for(let b in n){const m=n[b];if(m!==void 0)switch(b){case"icon":case"style":case"onLoad":case"mode":break;case"inline":case"hFlip":case"vFlip":s[b]=m===!0||m==="true"||m===1;break;case"flip":typeof m=="string"&&Co(s,m);break;case"color":r.color=m;break;case"rotate":typeof m=="string"?s[b]=ko(m):typeof m=="number"&&(s[b]=m);break;case"ariaHidden":case"aria-hidden":m!==!0&&m!=="true"&&delete o["aria-hidden"];break;default:{const A=_e[b];A?(m===!0||m==="true"||m===1)&&(s[A]=!0):Tt[b]===void 0&&(o[b]=m)}}}const i=Vs(e,s),c=i.attributes;if(s.inline&&(r.verticalAlign="-0.125em"),t==="svg"){o.style={...r,...l},Object.assign(o,c);let b=0,m=n.id;return typeof m=="string"&&(m=m.replace(/-/g,"_")),o.innerHTML=Gs(i.body,m?()=>m+"ID"+b++:"iconifyVue"),mt("svg",o)}const{body:p,width:_,height:y}=e,g=t==="mask"||(t==="bg"?!1:p.indexOf("currentColor")!==-1),C=To(p,{...c,width:_+"",height:y+""});return o.style={...r,"--svg":Do(C),width:Dt(c.width),height:Dt(c.height),...$o,...g?Ue:on,...l},mt("span",o)};qt(!0);Js("",so);if(typeof document<"u"&&typeof window<"u"){sn();const e=window;if(e.IconifyPreload!==void 0){const n=e.IconifyPreload,s="Invalid IconifyPreload syntax.";typeof n=="object"&&n!==null&&(n instanceof Array?n:[n]).forEach(o=>{try{(typeof o!="object"||o===null||o instanceof Array||typeof o.icons!="object"||typeof o.prefix!="string"||!Rs(o))&&console.error(s)}catch{console.error(s)}})}if(e.IconifyProviders!==void 0){const n=e.IconifyProviders;if(typeof n=="object"&&n!==null)for(let s in n){const o="IconifyProviders["+s+"] is invalid.";try{const t=n[s];if(typeof t!="object"||!t||t.resources===void 0)continue;Qs(s,t)||console.error(o)}catch{console.error(o)}}}}const Lo={...ke,body:""},$t=V({inheritAttrs:!1,data(){return{_name:"",_loadingIcon:null,iconMounted:!1,counter:0}},mounted(){this.iconMounted=!0},unmounted(){this.abortLoading()},methods:{abortLoading(){this._loadingIcon&&(this._loadingIcon.abort(),this._loadingIcon=null)},getIcon(e,n){if(typeof e=="object"&&e!==null&&typeof e.body=="string")return this._name="",this.abortLoading(),{data:e};let s;if(typeof e!="string"||(s=Ce(e,!1,!0))===null)return this.abortLoading(),null;const o=js(s);if(!o)return(!this._loadingIcon||this._loadingIcon.name!==e)&&(this.abortLoading(),this._name="",o!==null&&(this._loadingIcon={name:e,abort:xo([s],()=>{this.counter++})})),null;this.abortLoading(),this._name!==e&&(this._name=e,n&&n(e));const t=["iconify"];return s.prefix!==""&&t.push("iconify--"+s.prefix),s.provider!==""&&t.push("iconify--"+s.provider),{data:o,classes:t}}},render(){this.counter;const e=this.$attrs,n=this.iconMounted||e.ssr?this.getIcon(e.icon,e.onLoad):null;if(!n)return Mt(Lo,e);let s=e;return n.classes&&(s={...e,class:(typeof e.class=="string"?e.class+" ":"")+n.classes.join(" ")}),Mt({...ke,...n.data},s)}}),Ao=V({__name:"auto-complete",props:{width:{type:String,default:"100%"},options:{type:Array,default:()=>[]},valueSelected:{type:String,default:""}},emits:["update:selectedValue"],setup(e,{emit:n}){const s=e,o=n,t=w(s.valueSelected);return H(()=>s.valueSelected,()=>{t.value=s.valueSelected}),H(t,r=>{o("update:selectedValue",r)}),pe(()=>{t.value&&o("update:selectedValue",t.value)}),(r,a)=>(T(),N(d(ns),{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=l=>t.value=l),class:"relative"},{default:x(()=>[v(d(qn),{style:Le({width:e.width}),class:"min-w-[120px] w-full inline-flex items-center justify-between rounded px-[15px] leading-none h-[30px] gap-[5px] bg-white hover:bg-mauve3 focus:shadow-[0_0_0_2px] focus:shadow-black data-[placeholder]:text-grass9 outline-none border border-input"},{default:x(()=>[v(d(Gn),{class:"!bg-transparent w-full outline-none h-full selection:bg-grass5 placeholder-mauve8"}),v(d(Jn),null,{default:x(()=>[v(d($t),{icon:"radix-icons:chevron-down",class:"h-4 w-4"})]),_:1})]),_:1},8,["style"]),v(d(Qn),{style:Le({width:e.width}),class:"combobox-content absolute !z-12 w-full mt-[1px] min-w-[120px] bg-white overflow-hidden rounded shadow-[0px_10px_38px_-10px_rgba(22,_23,_24,_0.35),_0px_10px_20px_-15px_rgba(22,_23,_24,_0.2)] will-change-[opacity,transform] data-[side=top]:animate-slideDownAndFade data-[side=right]:animate-slideLeftAndFade data-[side=bottom]:animate-slideUpAndFade data-[side=left]:animate-slideRightAndFade"},{default:x(()=>[v(d(Wn),{class:"p-[5px]"},{default:x(()=>[v(d(Xn),{class:"text-mauve8 text-xs font-medium text-center py-2"}),v(d(Zn),null,{default:x(()=>[(T(!0),P(oe,null,re(e.options,(l,i)=>(T(),N(d(es),{key:i,class:"text-[13px] leading-none rounded-[3px] flex items-center h-[25px] pr-[35px] pl-[25px] relative select-none data-[disabled]:text-mauve8 data-[disabled]:pointer-events-none data-[highlighted]:outline-none data-[highlighted]:bg-mauve3 data-[highlighted]:text-black",value:l},{default:x(()=>[v(d(ts),{class:"absolute left-0 w-[25px] inline-flex items-center justify-center"},{default:x(()=>[v(d($t),{icon:"radix-icons:check"})]),_:1}),h("span",null,R(l),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["style"])]),_:1},8,["modelValue"]))}}),Po=ae(Ao,[["__scopeId","data-v-bc0fcfc5"]]),jo={class:"date-search flex items-center gap-3"},Oo={class:"label font-medium"},Ro={class:"flex items-center gap-2"},No={class:"h-[30px] flex items-center justify-between px-4 bg-white rounded cursor-pointer"},Bo=["disabled"],Uo=V({__name:"date",props:{title:{}},emits:["update:selectedDate"],setup(e,{emit:n}){const s=n,o=()=>{const y=new Date,g=y.getFullYear(),C=y.getMonth()+1;return{year:g,month:C}},t=w(o().year),r=w(o()),a=w(""),l=()=>{const{year:y,month:g}=r.value;a.value=`${y}/${g.toString().padStart(2,"0")}`,s("update:selectedDate",a.value)},i=y=>{let{year:g,month:C}=r.value;C+=y,C>12?(C=1,g+=1):C<1&&(C=12,g-=1),c.value={year:g,month:C-1}};pe(()=>{l()});const c=w({year:r.value.year,month:r.value.month-1});H(c,()=>{r.value={year:c.value.year,month:c.value.month+1},t.value=c.value.year,l()});const p=O(()=>{const y=new Date;return r.value.year>y.getFullYear()||r.value.year===y.getFullYear()&&r.value.month>=y.getMonth()+1}),_=O(()=>{const y=new Date,g=y.getFullYear(),C=y.getMonth();return t.value===g?{months:Array.from({length:12},(b,m)=>{const A=new Date(g,m);return m>C?is(A):null}).filter(Boolean)}:{months:t.value>g?Array.from({length:12},(b,m)=>m):[]}});return(y,g)=>(T(),P("div",jo,[h("span",Oo,R(y.title),1),h("div",Ro,[h("button",{class:"flex items-center gap-1 bg-gray-300 text-gray-700 pl-2 pr-3 py-[5px] rounded-md hover:bg-gray-400",onClick:g[0]||(g[0]=C=>i(-1))},[v(d(cs),{class:"w-4 h-4"}),g[4]||(g[4]=K(" 前月 "))]),v(d(ds),{modelValue:d(c),"onUpdate:modelValue":g[1]||(g[1]=C=>te(c)?c.value=C:null),"month-picker":"","auto-apply":"","format-locale":d(us),format:"E",filters:d(_),onUpdateMonthYear:g[2]||(g[2]=C=>t.value=C.year)},{trigger:x(()=>[h("div",No,[h("span",null,R(d(a)),1),v(d(ys),{class:"w-4 h-4"})])]),_:1},8,["modelValue","format-locale","filters"]),h("button",{class:G(["flex items-center gap-1 bg-gray-300 text-gray-700 pl-3 pr-2 py-[5px] rounded-md",{"opacity-50":d(p),"hover:bg-gray-400":!d(p)}]),onClick:g[3]||(g[3]=C=>i(1)),disabled:d(p)},[g[5]||(g[5]=K(" 翌月 ")),v(d(vs),{class:"w-4 h-4"})],10,Bo)])]))}}),Fo=ae(Uo,[["__scopeId","data-v-b4a4150f"]]),rn=V({__name:"Tooltip",props:{defaultOpen:{type:Boolean},open:{type:Boolean},delayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},emits:["update:open"],setup(e,{emit:n}){const t=Ft(e,n);return(r,a)=>(T(),N(d(ss),Fe(Ye(d(t))),{default:x(()=>[fe(r.$slots,"default")]),_:3},16))}}),an=V({inheritAttrs:!1,__name:"TooltipContent",props:{forceMount:{type:Boolean},ariaLabel:{},asChild:{type:Boolean},as:{},side:{},sideOffset:{default:4},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},class:{}},emits:["escapeKeyDown","pointerDownOutside"],setup(e,{emit:n}){const s=e,o=n,t=O(()=>{const{class:a,...l}=s;return l}),r=Ft(t,o);return(a,l)=>(T(),N(d(rs),null,{default:x(()=>[v(d(os),Nt({...d(r),...a.$attrs},{class:d(Ut)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s.class)}),{default:x(()=>[fe(a.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),ln=V({__name:"TooltipTrigger",props:{asChild:{type:Boolean},as:{}},setup(e){const n=e;return(s,o)=>(T(),N(d(as),Fe(Ye(n)),{default:x(()=>[fe(s.$slots,"default")]),_:3},16))}}),cn=V({__name:"TooltipProvider",props:{delayDuration:{},skipDelayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},setup(e){const n=e;return(s,o)=>(T(),N(d(ls),Fe(Ye(n)),{default:x(()=>[fe(s.$slots,"default")]),_:3},16))}}),un=On("userListPageStore",()=>{const e=w(!1),n=w(!1);return{isOpenNotifyCrawl:e,isOpenNotifyExport:n}}),Yo={class:"search flex justify-between items-center min-h-[80px] !px-[25px] max-lg:!px-[10px] max-lg:flex-col max-lg:gap-5 max-lg:justify-start"},Ho={class:"office flex gap-5 items-center font-medium w-full"},Vo={class:"date w-full"},zo={class:"flex relative gap-5 pr-[20px]"},Ko={key:0,class:"absolute top-[5px] right-[-7px]"},qo={class:"text-[12px]"},Go={key:1,class:"absolute top-[36px] left-[-30px] text-[10px] w-[200px]"},Jo=V({__name:"index",emits:["update:officeId","update:targetYearMonth"],setup(e,{emit:n}){const s=Rn(),o=we(),t=un(),r=Se(),a=w(""),l=w(""),i=w(!1),c=n,p=O(()=>r.job),_=O(()=>{const b=s.getLocalStorage(Ee.officeName),m=o.offices.map(A=>A.officeName);return b&&m.length&&m.includes(b)&&(a.value=b),!b&&m[0]&&(a.value=m[0],s.setLocalStorage(Ee.officeName,m[0])),m}),y=O(()=>{var b;return a.value&&s.setLocalStorage(Ee.officeName,a.value),(b=o.offices.find(m=>m.officeName===a.value))==null?void 0:b.id});H(y,()=>{c("update:officeId",y.value)}),H(l,()=>{c("update:targetYearMonth",l.value)});const g=async()=>{i.value=!0;try{const b=await o.crawlCompanyUserStatus();await r.searchLastJob(),b!=null&&b.data&&(t.isOpenNotifyCrawl=!0,setTimeout(()=>{window.location.reload()},3500))}catch(b){console.error(b)}finally{i.value=!1}},C=O(()=>{if(p.value&&p.value.requestUpdate.status==1)return!0;const b=new Date,[m,A]=l.value.split("/").map(Number),$=b.getFullYear(),L=b.getMonth()+1;return!($===m&&L===A)});return(b,m)=>{var J;const A=Po,$=Fo,L=Yt,B=ln,W=an,E=rn,U=cn;return T(),P("div",Yo,[h("div",Ho,[m[2]||(m[2]=h("span",{class:"label"},"事業所",-1)),v(A,{width:"300px",options:d(_),"value-selected":d(a),"onUpdate:selectedValue":m[0]||(m[0]=q=>a.value=q)},null,8,["options","value-selected"])]),h("div",Vo,[v($,{title:"表示年月","onUpdate:selectedDate":m[1]||(m[1]=q=>l.value=q)})]),h("div",zo,[v(L,{onClick:g,disabled:d(C),class:"w-[80px] flex items-center justify-center"},{default:x(()=>[d(i)?(T(),N(d(Ht),{key:0,class:"w-4 h-4 mr-2 animate-spin flex-shrink-0"})):Q("",!0),m[3]||(m[3]=K("更新 "))]),_:1},8,["disabled"]),((J=d(p))==null?void 0:J.requestUpdate.status)==2?(T(),P("div",Ko,[v(U,null,{default:x(()=>[v(E,null,{default:x(()=>[v(B,null,{default:x(()=>[v(d(Ae),{class:"w-[20px] h-[20px] text-red-500 cursor-pointer hover:text-red-600"})]),_:1}),v(W,{class:"mb-2 mr-2"},{default:x(()=>{var q;return[h("p",qo,R((q=d(p))==null?void 0:q.requestUpdate.errorMessage),1)]}),_:1})]),_:1})]),_:1})])):Q("",!0),d(p)?(T(),P("div",Go," 最終更新："+R(("formatDate"in b?b.formatDate:d(ye))(d(p).requestUpdate.updatedAt,"YYYY/MM/DD HH:mm")),1)):Q("",!0)])])}}}),Qo=ae(Jo,[["__scopeId","data-v-31d35e49"]]),Wo={class:"flex flex-col items-center"},Xo={class:"grid grid-cols-5 gap-2 mb-4"},Zo=["onClick"],er=V({__name:"character",setup(e){const n=we(),s=w(ht.map(l=>({...l,selected:!1}))),o=O(()=>n.userNameKana);H(o,()=>{const l=n.charactersSelected.length>0;s.value=ht.map(i=>{var p;const c=(p=o.value)==null?void 0:p.some(_=>_.startsWith(i.label)||_.startsWith(i.label2));return{...i,disabled:!c,selected:l?n.charactersSelected.includes(`${i.label}, ${i.label2}`):!1}})});const t=l=>l.disabled?"h-[25px] w-[25px] bg-gray-400 text-white rounded-md cursor-not-allowed ":l.selected?"h-[25px] w-[25px] border border-blue-500 text-blue-500 rounded-md ":"h-[25px] w-[25px] border border-black rounded-md hover:bg-gray-100 ",r=l=>{l.disabled||(l.selected=!l.selected),n.charactersSelected=s.value.filter(i=>i.selected).map(i=>`${i.label}, ${i.label2}`)},a=()=>{s.value.forEach(l=>{l.selected=!1}),n.charactersSelected=[]};return(l,i)=>(T(),P("div",Wo,[h("div",Xo,[(T(!0),P(oe,null,re(d(s),(c,p)=>(T(),P("button",{key:p,class:G(t(c)),onClick:_=>r(c)},R(c.label),11,Zo))),128))]),h("button",{class:"py-2 px-4 border border-black rounded-full text-black hover:bg-gray-200",onClick:a}," 条件クリア ")]))}}),tr=ae(er,[["__scopeId","data-v-e901fe4f"]]),nr=V({__name:"status",props:{cssStyle:{},type:{},selectedStatus:{}},emits:["filterStatus"],setup(e,{emit:n}){const s=e,{type:o}=Bt(s),t=w(s.selectedStatus),r={0:"未実行",1:"実行予定",2:"実行済み",3:"実行エラー"},a=n,l=Object.entries(r).map(([i,c])=>({id:Number(i),value:c}));return H(()=>s.selectedStatus,i=>{t.value=i}),H(t,()=>{a("filterStatus",{status:t.value,type:o.value})}),(i,c)=>{const p=_s,_=xs,y=Ss,g=ws,C=Cs;return T(),P("div",{class:G(i.cssStyle)},[v(C,{modelValue:d(t),"onUpdate:modelValue":c[0]||(c[0]=b=>te(t)?t.value=b:null)},{default:x(()=>[v(_,{class:"w-full"},{default:x(()=>[v(p,{placeholder:""})]),_:1}),v(g,null,{default:x(()=>[v(y,{value:"999"},{default:x(()=>c[1]||(c[1]=[K("すべて")])),_:1}),(T(!0),P(oe,null,re(d(l),b=>(T(),N(y,{value:`${b.id}`},{default:x(()=>[K(R(b.value),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:1},8,["modelValue"])],2)}}}),sr={key:0,class:"absolute w-full h-full bg-[#f7f5f505] flex justify-center items-center z-50"},or=["innerHTML"],rr=V({__name:"notify-handle-export",props:{isOpenNotify:{type:Boolean,default:!1},htmlMessage:{type:String,default:""},isError:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:n}){const s=e,o=n;return H(()=>s.isOpenNotify,t=>{t&&setTimeout(()=>{o("close")},3e3)}),(t,r)=>e.isOpenNotify?(T(),P("div",sr,[h("div",{class:G(["bg-[#b5b5b5e6] py-[24px] px-[50px] gap-[8px] rounded-[30px]",{"bg-[#ead3d3]":e.isError}])},[h("div",{class:"flex flex-col items-center",innerHTML:e.htmlMessage},null,8,or)],2)])):Q("",!0)}}),ar={class:"table-container overflow-auto border-b"},lr={class:"w-full table-fixed"},ir={class:"pl-5"},cr=V({__name:"confirm-create-report",props:{users:{type:Array,default:()=>[]},isOpen:{type:Boolean,default:!1}},emits:["close","export"],setup(e,{emit:n}){const s=e,o=w(s.isOpen);H(()=>s.isOpen,i=>{o.value=i});const t=w(!1),r=n,a=()=>{r("close")},l=()=>{t.value=!0,r("export"),setTimeout(()=>{t.value=!1,r("close")},1e3)};return(i,c)=>{const p=Lt,_=At,y=Is,g=Pt,C=An,b=jt,m=Ot,A=Rt;return T(),N(A,{open:d(o),"onUpdate:open":c[0]||(c[0]=$=>te(o)?o.value=$:null)},{default:x(()=>[v(m,null,{default:x(()=>[v(_,{class:"flex flex-col gap-4 items-center"},{default:x(()=>[v(p,{class:"text-sm"},{default:x(()=>c[1]||(c[1]=[K("実行の確認")])),_:1})]),_:1}),v(y,null,{default:x(()=>c[2]||(c[2]=[h("span",null,"以下を実行します、よろしいですか？",-1)])),_:1}),h("div",ar,[h("table",lr,[c[5]||(c[5]=h("thead",{class:"bg-[#adadad] sticky top-0 z-10"},[h("tr",{class:"border border-[#adadad]"},[h("th",{class:"py-3 w-[50%]"},[h("span",{class:"flex items-center justify-center px-4 text-black border-white border-r-2"},"利用者")]),h("th",{class:"py-3 w-[25%]"},[h("span",{class:"flex items-center justify-center px-4 text-black border-white border-r-2"},"報告書")]),h("th",{class:"py-3 w-[25%]"},[h("span",{class:"flex items-center justify-center px-4 text-black"},"計画書")])])],-1)),h("tbody",null,[(T(!0),P(oe,null,re(e.users,($,L)=>(T(),P("tr",{key:L,class:"h-10 hover:cursor-pointer hover:bg-[#cfcfcf47] border border-gray-300"},[h("td",null,[h("span",ir,R($.nameKanji),1)]),h("td",{class:G($.reportStatus===99?"visible":"invisible")},c[3]||(c[3]=[h("span",{class:"text-center flex justify-center bg-[#ccc] py-[8px] mx-[5px] rounded"},"実行",-1)]),2),h("td",{class:G($.planStatus===99?"visible":"invisible")},c[4]||(c[4]=[h("span",{class:"text-center flex justify-center bg-[#ccc] py-[8px] mx-[5px] rounded"},"実行",-1)]),2)]))),128))])])]),v(b,{class:"flex !flex-col gap-4"},{default:x(()=>[v(g,{class:"flex self-center min-w-[120px]",onClick:l},{default:x(()=>[d(t)?(T(),N(d(Ht),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):Q("",!0),c[6]||(c[6]=K("実行"))]),_:1}),v(C,{class:"flex self-center border border-gray-300 min-w-[120px]",onClick:a},{default:x(()=>c[7]||(c[7]=[K("キャンセル")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}}),ur=ae(cr,[["__scopeId","data-v-04b4db2b"]]),dr={class:"user-container flex flex-col gap-2 overflow-hidden"},fr={class:"action flex justify-between pr-5 max-lg:flex-col max-lg:gap-5"},pr={class:"flex gap-4 items-center"},mr={class:"relative w-full max-w-[220px] items-center justify-center"},hr={class:"absolute start-0 inset-y-0 flex items-center justify-center px-2"},gr={class:"flex items-center gap-2"},yr={id:"toggle-report-element",class:"flex! items-center justify-center space-x-2 absolute duration-10 ease-linear whitespace-nowrap top-0"},vr={id:"toggle-plan-element",class:"flex! items-center justify-center space-x-2 absolute duration-10 ease-linear whitespace-nowrap top-0"},br={class:"w-full flex relative flex-col mt-[35px]"},_r={class:"w-full table-fixed",id:"table-user"},xr={class:"sticky top-0 z-10"},Sr={class:"bg-[#afeeee] mt-[20px]"},wr=["id"],Cr=["onClick"],kr={key:0},Tr=["colspan"],Ir={key:0},Er={key:1},Dr=["innerHTML"],Mr=["innerHTML"],$r=["onClick"],Lr=["onClick"],Ar={class:"flex justify-end mr-[35px]"},Y=99,Pr=V({__name:"index",props:{officeId:{type:Number},targetYearMonth:{type:String}},setup(e,{expose:n}){const s=e,{officeId:o,targetYearMonth:t}=Bt(s),r=we(),a=un(),l=Se(),i=w(""),c=w(""),p=w(!1),_=w(!1),y=w(!1),g=w(!1),C=w(!0),b=w("999"),m=w("999"),A=w([]),$=[{label:"利用者",width:"16%",key:"nameKanji",isSort:!0},{label:"生年月日",width:"12%",key:"birthday",isSort:!0},{label:"報告書",width:"12%",key:"reportStatus",isSort:!1},{label:"実行日時",width:"15%",key:"reportDate",isSort:!1},{label:"計画書",width:"12%",key:"planStatus",isSort:!1},{label:"実行日時",width:"15%",key:"planDate",isSort:!1},{label:"報告書",width:"9%",key:"actionReport",isSort:!1},{label:"計画書",width:"9%",key:"actionPlan",isSort:!1}],L={0:"未実行",1:"実行予定",2:"実行済み",3:"実行エラー"},B=w(Nn),W=w(gt),E=w(!1),U=O(()=>r.isLoadCompanyUsers),J=O(()=>r.charactersSelected),q=O(()=>r.isHaveDataCompanyUsers),z=O(()=>r.companyUsers),Je=O(()=>l.notify),D=w([]);H(z,()=>{_.value=!1,y.value=!1,D.value=me()}),H([i,J,c],()=>{D.value=me()}),H(D,f=>{const u=f.some(S=>S.reportStatus===Y||S.planStatus===Y);C.value=!u}),H([b,m],()=>{D.value=me()});const me=f=>{let u=f??[...z.value];return i.value&&(u=_n(u)),J.value.length&&(u=pn(u)),c.value&&(u=mn(u)),(b.value!=="999"||m.value!=="999")&&(u=dn(u)),u},Qe=({status:f,type:u})=>{u==="report"&&(b.value=f),u==="plan"&&(m.value=f)},dn=f=>{const u=Number(b.value),S=Number(m.value);return f.filter(k=>u!==999&&S!==999?k.reportStatus===u&&k.planStatus===S:u!==999?k.reportStatus===u:S!==999?k.planStatus===S:!0)},fn=()=>{!y.value?(D.value=hn(D.value),_.value&&Ie(_.value)):(D.value=D.value.map(u=>{var S;return{...u,reportStatus:((S=z.value.find(k=>k.id===u.id))==null?void 0:S.reportStatus)??0}}),_.value=!1,Ie(_.value))},Ie=f=>{(f!==void 0?f:!_.value)?D.value=gn(D.value):(D.value=D.value.map(S=>{var k;return{...S,planStatus:((k=z.value.find(M=>M.id===S.id))==null?void 0:k.planStatus)??0}}),D.value=me(D.value))},pn=f=>f.filter(u=>J.value.some(S=>{const[k,M]=S.split(",");return u.nameKana.startsWith(k.trim())||u.nameKana.startsWith(M.trim())})),mn=f=>f.filter(u=>u.nameKanji.includes(c.value)),hn=f=>f.map(u=>({...u,reportStatus:u.reportStatus===0||u.reportStatus===3?Y:u.reportStatus})),gn=f=>f.map(u=>({...u,planStatus:(u.planStatus===0||u.planStatus===3)&&u.reportStatus!==0&&u.reportStatus!==3?Y:u.planStatus})),We=f=>f?f===1||f===Y?L[1]:f===2?L[2]:f===3?L[3]:L[0]:L[0],Xe=f=>{f||(f=0);let u="flex justify-center items-center py-2 ml-2 rounded-sm ";switch(f){case 0:u+="bg-[#d4e9d3]";break;case 1:case Y:u+="bg-[#fff3cb]";break;case 2:u+="bg-[#d9e8fc]";break;case 3:u+="bg-[#f8cecb]";break}return u},yn=f=>{f||(f=0);let u="flex justify-center items-center py-2 ml-2 rounded-sm mx-1 ";switch(f){case 0:case 3:u+=ne.value?"border border-gray-300 bg-[#ccc] opacity-50 cursor-not-allowed":"border border-gray-300 hover:bg-[#faeded]";break;case 1:u+="bg-[#afeeed] cursor-not-allowed";break;case 2:u+="bg-[#ccc] cursor-not-allowed";break;case Y:u+="bg-[#afeeed] hover:bg-[#77f6f4]";break}return u},vn=f=>{const u=f.reportStatus??0,S=f.planStatus??0;let k="flex justify-center items-center py-2 ml-2 rounded-sm mx-1 ";switch(S){case 0:case 3:k+=[Y,1,2].includes(u)&&!ne.value?"border border-gray-300 hover:bg-[#faeded]":"border border-gray-300 bg-[#ccc] opacity-50 cursor-not-allowed";break;case 1:k+="bg-[#afeeed] cursor-not-allowed";break;case 2:k+="bg-[#ccc] cursor-not-allowed";break;case Y:k+="bg-[#afeeed] hover:bg-[#77f6f4]";break}return k},bn=f=>{if(!f.isSort)return;const[u,S]=i.value.split(":"),k=u===f.key?S===ee.ASC?ee.DESC:"":ee.ASC;i.value=k?`${f.key}:${k}`:""},_n=f=>{const[u,S]=i.value.split(":");return f.sort((k,M)=>{const j=k[u],F=M[u];if(typeof j=="number"&&typeof F=="number")return S===ee.DESC?F-j:j-F;if(typeof j=="string"&&typeof F=="string"){const X=new Date(j),Z=new Date(F);return!isNaN(X.getTime())&&!isNaN(Z.getTime())?S===ee.DESC?Z.getTime()-X.getTime():X.getTime()-Z.getTime():S===ee.DESC?F.localeCompare(j):j.localeCompare(F)}return 0})},xn=f=>{var j;if(ne.value)return;const{id:u,reportStatus:S}=f;if(![0,3,Y].includes(S))return;const k=((j=z.value.find(F=>F.id===u))==null?void 0:j.reportStatus)??0,M=S===Y?k:Y;D.value=D.value.map(Sn(f.id,M)),M!=Y&&Ze(f,!0)},Ze=(f,u)=>{var X;if(ne.value)return;const{id:S,planStatus:k,reportStatus:M}=f;if(![0,3,Y].includes(k)||[0,3].includes(M))return;const j=((X=z.value.find(Z=>Z.id===S))==null?void 0:X.planStatus)??0;if(u){D.value=D.value.map(et(f.id,j));return}const F=k===Y?j:Y;D.value=D.value.map(et(f.id,F))},Sn=(f,u)=>S=>S.id===f?{...S,reportStatus:u}:S,et=(f,u)=>S=>S.id===f?{...S,planStatus:u}:S,wn=()=>{A.value=D.value.filter(f=>f.reportStatus===99||f.planStatus===99),p.value=!0},Cn=async()=>{var S;l.clearNotify(),r.isLoadCompanyUsers=!0;const f=A.value.map(k=>{const{id:M}=k,j=k.reportStatus===99?1:0,F=k.planStatus===99?1:0;return{id:M,isExecuteReport:j,isExecutePlan:F}});if(!(o!=null&&o.value)||!(t!=null&&t.value))return;const u={officeId:o==null?void 0:o.value,targetYearMonth:t==null?void 0:t.value,users:f};if(await r.bulkExportReport(u),(S=Je.value)!=null&&S.message){W.value=`
      <span class="text-red-500">${Je.value.message}</span>
    `,E.value=!0,a.isOpenNotifyExport=!0,r.isLoadCompanyUsers=!1;return}await Promise.all([await r.getCompanyUseStatus({officeId:o==null?void 0:o.value,targetYearMonth:t==null?void 0:t.value}),await l.searchLastJob()]),r.isLoadCompanyUsers=!1,W.value=gt,a.isOpenNotifyExport=!0},tt=w(),nt=w(),st=w(),ot=w(),rt=w(),at=w(),lt=w(),it=w(),ct=w(),ut=w(),kn=w(0);pe(()=>{var f;tt.value=document.getElementById("select-report-element"),nt.value=document.getElementById("column-3"),st.value=document.getElementById("select-plan-element"),ot.value=document.getElementById("column-5"),rt.value=document.getElementById("toggle-report-element"),at.value=document.getElementById("column-7"),lt.value=document.getElementById("toggle-plan-element"),it.value=document.getElementById("column-8"),ct.value=document.getElementById("table-user"),ut.value=(f=ct.value)==null?void 0:f.getBoundingClientRect(),he(),window.addEventListener("resize",he)});const he=()=>{const f=ut.value,u=[{element:tt.value,column:nt.value,position:35},{element:st.value,column:ot.value,position:35},{element:rt.value,column:at.value,position:30},{element:lt.value,column:it.value,position:30}],S=()=>{u.forEach(({element:k,column:M,position:j})=>{Tn(k,M,j,f)})};S(),setTimeout(S,50)},Tn=(f,u,S,k)=>{if(!f||!u)return;const M=u.getBoundingClientRect();f.style.left=`${M.left+window.scrollX}px`,f.style.top=`${M.top+window.scrollY-S}px`,f.style.width=`${M.width-2}px`,k&&k.left>M.left||window.innerWidth-M.left-M.width<5?(f.style.zIndex="-1",f.style.display="none"):(f.style.zIndex="5",f.style.display="flex")},In=f=>{f.target.scrollLeft!==kn.value&&he()};Bn(()=>{he()});const En=O(()=>l.isLoadPermission),ne=O(()=>(En.value,!(Pn(t==null?void 0:t.value)&&$e())));return n({resetFilterTable:f=>{f&&(c.value="",b.value="999",m.value="999",i.value=""),g.value=!1}}),(f,u)=>{const S=Vn,k=bs,M=nr,j=ks,F=ln,X=an,Z=rn,dt=cn,Dn=Ts,ft=rr,Mn=Yt,$n=ur,Ln=ps;return T(),P("div",dr,[h("div",fr,[h("div",pr,[h("div",mr,[v(S,{id:"search",type:"text",placeholder:"Search",class:"pl-10",modelValue:d(c),"onUpdate:modelValue":u[0]||(u[0]=I=>te(c)?c.value=I:null)},null,8,["modelValue"]),h("span",hr,[v(d(fs),{class:"w-4 h-4 text-muted-foreground"})])]),h("div",gr,[v(k,{id:"terms",checked:d(g),"onUpdate:checked":u[1]||(u[1]=I=>te(g)?g.value=I:null)},null,8,["checked"]),u[9]||(u[9]=h("span",{for:"terms",class:"flex text-xs flex-shrink-0"}," 和暦表示 ",-1))])])]),v(M,{id:"select-report-element",cssStyle:"absolute duration-10 ease-linear whitespace-nowrap top-0",type:"report","selected-status":d(b),onFilterStatus:Qe},null,8,["selected-status"]),v(M,{id:"select-plan-element",cssStyle:"absolute duration-10 ease-linear whitespace-nowrap top-0",type:"plan","selected-status":d(m),onFilterStatus:Qe},null,8,["selected-status"]),h("div",yr,[v(j,{disabled:d(ne),checked:d(y),"onUpdate:checked":u[2]||(u[2]=I=>te(y)?y.value=I:null),onClick:u[3]||(u[3]=()=>fn())},null,8,["disabled","checked"]),u[10]||(u[10]=h("span",null,"一括",-1))]),h("div",vr,[v(j,{disabled:d(ne),checked:d(_),"onUpdate:checked":u[4]||(u[4]=I=>te(_)?_.value=I:null),onClick:u[5]||(u[5]=()=>Ie())},null,8,["disabled","checked"]),u[11]||(u[11]=h("span",null,"一括",-1))]),h("div",br,[h("div",{class:G(["table-container overflow-auto border-b",{"border-l":d(D).length}]),onScroll:In},[h("table",_r,[h("thead",xr,[h("tr",Sr,[(T(),P(oe,null,re($,(I,le)=>h("th",{class:"py-3",id:`column-${le+1}`,key:le,style:Le({width:I.width})},[h("span",{class:G(["flex items-center justify-center px-4 text-black border-white hover:cursor-pointer ",le<$.length-1?"border-r-2":""]),onClick:pt=>bn(I)},[K(R(I.label)+" ",1),d(i)&&d(i).split(":")[1]==("SORT"in f?f.SORT:d(ee)).ASC&&I.key==d(i).split(":")[0]?(T(),N(d(ms),{key:0,width:"12",height:"12",class:"ml-1 hover:text-[#5566da]"})):Q("",!0),d(i)&&d(i).split(":")[1]==("SORT"in f?f.SORT:d(ee)).DESC&&I.key==d(i).split(":")[0]?(T(),N(d(hs),{key:1,width:"12",height:"12",class:"ml-1 hover:text-[#5566da]"})):Q("",!0)],10,Cr)],12,wr)),64))])]),h("tbody",null,[d(D).length===0&&!d(q)?(T(),P("tr",kr,[h("td",{class:"text-center py-3 text-[#5566da]",colspan:$.length},R(("MESSAGES"in f?f.MESSAGES:d(Un)).EMPTY),9,Tr)])):(T(!0),P(oe,{key:1},re(d(D),(I,le)=>(T(),P("tr",{class:G(["bg-white dark:bg-gray-800 text-center h-10 hover:cursor-pointer hover:bg-[#afe7ee47]",[le<d(D).length-1?"border-b":""]])},[h("td",null,[h("span",null,R(I.nameKanji),1)]),h("td",null,[d(g)?(T(),P("span",Ir,R(("formatToJapaneseEra"in f?f.formatToJapaneseEra:d(gs))(I.birthday)),1)):(T(),P("span",Er,R(("formatDate"in f?f.formatDate:d(ye))(I.birthday,"YYYY/MM/DD")),1))]),h("td",null,[h("span",{class:G(["px-[18px] py-[8px] rounded-sm",Xe(I.reportStatus)])},[K(R(We(I.reportStatus))+" ",1),I.reportErrorMessage?(T(),N(dt,{key:0},{default:x(()=>[v(Z,null,{default:x(()=>[v(F,null,{default:x(()=>[v(d(Ae),{width:"16",height:"16",class:"ml-[5px] hover:text-[#5566da] text-[red]"})]),_:1}),v(X,null,{default:x(()=>[h("p",{innerHTML:I.reportErrorMessage},null,8,Dr)]),_:2},1024)]),_:2},1024)]),_:2},1024)):Q("",!0)],2)]),h("td",null,[h("span",null,R(("formatDate"in f?f.formatDate:d(ye))(I.reportDate,"YYYY/MM/DD HH:mm")),1)]),h("td",null,[h("span",{class:G(["px-[18px] py-[8px] rounded-sm",Xe(I.planStatus)])},[K(R(We(I.planStatus))+" ",1),I.planErrorMessage?(T(),N(dt,{key:0},{default:x(()=>[v(Z,null,{default:x(()=>[v(F,null,{default:x(()=>[v(d(Ae),{width:"16",height:"16",class:"ml-[5px] hover:text-[#5566da] text-[red]"})]),_:1}),v(X,null,{default:x(()=>[h("p",{class:"text-[12px]",innerHTML:I.planErrorMessage},null,8,Mr)]),_:2},1024)]),_:2},1024)]),_:2},1024)):Q("",!0)],2)]),h("td",null,[h("span",null,R(("formatDate"in f?f.formatDate:d(ye))(I.planDate,"YYYY/MM/DD HH:mm")),1)]),h("td",null,[h("span",{class:G(yn(I.reportStatus)),onClick:pt=>xn(I)},"実行",10,$r)]),h("td",null,[h("span",{class:G(vn(I)),onClick:pt=>Ze(I)},"実行 ",10,Lr)])],2))),256))])])],34),d(U)?(T(),N(Dn,{key:0})):Q("",!0),v(ft,{"is-open-notify":d(a).isOpenNotifyCrawl,"html-message":d(B),onClose:u[6]||(u[6]=I=>d(a).isOpenNotifyCrawl=!1)},null,8,["is-open-notify","html-message"]),v(ft,{"is-open-notify":d(a).isOpenNotifyExport,"html-message":d(W),"is-error":d(E),onClose:u[7]||(u[7]=I=>{d(a).isOpenNotifyExport=!1,E.value=!1})},null,8,["is-open-notify","html-message","is-error"]),h("div",Ar,[v(Mn,{disabled:d(C)||d(ne),class:"flex justify-end mt-[30px]",onClick:wn},{default:x(()=>u[12]||(u[12]=[K(" 実行開始 ")])),_:1},8,["disabled"])])]),v($n,{isOpen:d(p),users:d(A),onClose:u[8]||(u[8]=()=>p.value=!1),onExport:Cn},null,8,["isOpen","users"]),v(Ln,{class:"top-[5px]"})])}}}),jr=ae(Pr,[["__scopeId","data-v-bce13831"]]),Or={class:"user-list px-4"},Rr={class:"relative header flex items-center h-[40px] border-b border-b-[#e2e2e2]"},Nr={class:"body-content flex py-4 w-full gap-2"},sa=V({__name:"index",setup(e){const n=we(),s=Se(),o=Fn(),t=w(void 0),r=w(""),a=w(),l=y=>{var g;a.value&&((g=a.value)==null||g.resetFilterTable(!0)),t.value=y,p(!0)},i=y=>{var g;a.value&&((g=a.value)==null||g.resetFilterTable(!1)),r.value=y,p(!1)},c=y=>{const[g,C]=y.split("/");return`${g}-${C}-01`},p=y=>{t.value&&r.value&&n.getCompanyUseStatus({officeId:t.value,targetYearMonth:c(r.value)},y)};pe(()=>{s.searchLastJob(),p(!0)}),Yn(()=>{o.stopSearchLastJob()});const _=O(()=>s.job);return H(_,(y,g)=>{(g==null?void 0:g.requestReport.status)===1&&(y==null?void 0:y.requestReport.status)!==1&&p(!1)}),(y,g)=>{const C=Es,b=zn,m=Qo,A=tr,$=jr;return T(),P("div",Or,[v(C),h("div",Rr,[g[0]||(g[0]=h("span",{class:"text-base font-bold"},"利用者選択",-1)),v(b,{"class-custom":"absolute z-10 bg-[#ccc] w-[100%] top-[40px]  py-[11px]",type:"custom"})]),v(m,{"onUpdate:officeId":l,"onUpdate:targetYearMonth":i}),h("div",Nr,[v(A,{class:"px-5 py-10 min-w-[230px]"}),v($,{class:"w-full",ref_key:"userTableComponentRef",ref:a,"office-id":d(t),"target-year-month":c(d(r))},null,8,["office-id","target-year-month"])])])}}});export{sa as default};
