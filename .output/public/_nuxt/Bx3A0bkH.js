import{t as O,o as j,s as C,f as E,u as q,F as A,_ as D,a as z,b as H,c as J}from"./BE_ZaBKs.js";import{L as K,_ as Q}from"./DuEtZ4gz.js";import{_ as U}from"./DGjHy2PC.js";import{m as W,C as X,u as Y,n as Z,r as x,E as ss,G as ts,M as r,c as es,a as o,b as t,p as e,w as a,F as R,o as l,q as h,v as i,x as os,d as F}from"./D_nG8j6U.js";import{u as as}from"./v48q7m3w.js";import{E as V,a as P}from"./DQoP3Xmf.js";import"./Cj8-ZoOo.js";const ns={class:"login-page flex flex-col items-center justify-center h-[100vh]"},ls={class:"flex flex-col min-w-[500px] bg-white px-12 py-8"},rs={class:"relative"},is={class:"relative"},bs=W({__name:"index",setup(ms){const $=X(),M=Y(),T=Z(),{redirectPage:d}=as(),_=$.query.token,u=x(!1),B=ss(()=>T.notify);ts(()=>{_||d("/login")});const m=x(!1),p=x(!1),L=()=>{m.value=!m.value},N=()=>{p.value=!p.value},G=O(j({password:C(E(r.ERR001,R.password)).min(8,{message:r.ERR007}).max(50),passwordConfirmation:C(E(r.ERR001,R.confirmPassword)).min(8,{message:r.ERR007}).max(50)}).refine(({password:c,passwordConfirmation:s})=>c===s,{message:r.ERR006,path:["passwordConfirmation"]})),{handleSubmit:I}=q({validationSchema:G}),b=I(async c=>{var f;u.value=!0;const{password:s}=c;await M.resetPassword(s,_),(f=B.value)!=null&&f.message||d("/confirm-email-change-password"),u.value=!1});return(c,s)=>{const f=D,y=Q,g=z,w=H,v=J,k=A,S=U;return l(),es("div",ns,[s[8]||(s[8]=o("div",{class:"logo"},"LOGO",-1)),o("div",ls,[t(f),s[6]||(s[6]=o("h1",{class:"text-sm font-bold mb-[30px]"},"パスワード設定",-1)),s[7]||(s[7]=o("div",{class:"flex flex-col gap-2 mb-[30px]"},[o("p",{class:"text-xs"},"パスワードは英小文字、数字を含む、半角英数字８文字以上を設定してください。")],-1)),o("form",{class:"flex flex-col gap-[30px]",onSubmit:s[1]||(s[1]=(...n)=>e(b)&&e(b)(...n))},[t(k,{name:"password"},{default:a(({componentField:n})=>[t(v,{class:"relative"},{default:a(()=>[s[2]||(s[2]=o("span",{class:"font-medium"},"パスワード",-1)),t(g,null,{default:a(()=>[o("div",rs,[t(y,h({type:e(m)?"text":"password",placeholder:"パスワード"},n),null,16,["type"]),o("button",{type:"button",class:"absolute right-[15px] top-1/2 transform -translate-y-1/2",onClick:L,"aria-label":"Toggle password visibility"},[e(m)?(l(),i(e(P),{key:1,class:"h-5 w-3.5 text-black"})):(l(),i(e(V),{key:0,class:"h-5 w-3.5 text-black"}))])])]),_:2},1024),t(w,{class:"absolute top-full left-0 mt-1 text-red-500 !m-[0px] !text-[12px] font-normal"})]),_:2},1024)]),_:1}),t(k,{name:"passwordConfirmation"},{default:a(({componentField:n})=>[t(v,{class:"relative"},{default:a(()=>[s[3]||(s[3]=o("span",{class:"font-medium"},"パスワード（確認用）",-1)),t(g,null,{default:a(()=>[o("div",is,[t(y,h({type:e(p)?"text":"password",placeholder:"パスワード（確認用）"},n),null,16,["type"]),o("button",{type:"button",class:"absolute right-[15px] top-1/2 transform -translate-y-1/2",onClick:N,"aria-label":"Toggle password visibility"},[e(p)?(l(),i(e(P),{key:1,class:"h-5 w-3.5 text-black"})):(l(),i(e(V),{key:0,class:"h-5 w-3.5 text-black"}))])]),t(w,{class:"absolute top-full left-0 mt-1 text-red-500 !m-[0px] !text-[12px] font-normal"})]),_:2},1024)]),_:2},1024)]),_:1}),t(S,{type:"submit",class:"flex self-center w-[132px]"},{default:a(()=>[e(u)?(l(),i(e(K),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):os("",!0),s[4]||(s[4]=F(" 保存 "))]),_:1}),t(S,{class:"w-[132px]",variant:"cancel_btn",type:"button",onClick:s[0]||(s[0]=n=>e(d)("/login"))},{default:a(()=>s[5]||(s[5]=[F(" キャンセル ")])),_:1})],32)])])}}});export{bs as default};
