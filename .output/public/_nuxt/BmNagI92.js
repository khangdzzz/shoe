import{_ as be,a as ye}from"./CZnRw67B.js";import{_ as ge}from"./CQpWXwjB.js";import{_ as we}from"./DZE0ZP_9.js";import{_ as ke}from"./DNt4dqZ9.js";import{t as he,u as Pe,_ as Ne,a as Se,F as Te}from"./B7JqWQhY.js";import{_ as Ce,a as Ee,b as Fe,c as Ae,d as Me}from"./Dx9SGJ4F.js";import{_ as Ie,a as $e}from"./CSEANPs6.js";import{_ as De}from"./Ek6DZmXg.js";import{_ as Oe}from"./DiFibC3f.js";import{_ as Ye}from"./CKBT_iGW.js";import{m as W,y as Ge,n as Ke,r as y,z as Le,F as n,M as Re,P as H,g as B,T as F,o as m,c as P,a as s,p as l,v as u,x as k,b as e,w as t,d as A,q as h,A as Ue,B as Ve,C as He,D as j,E as q,t as Y,G as Be,H as je}from"./DPAOikMj.js";import{f as z}from"./DevxgbSN.js";import{o as qe,a as M,s as G,f as ze,b as Je}from"./Dj8qS6N7.js";import{v as p,g as Qe}from"./ClLAXgnw.js";import{u as We}from"./Diy0ywgh.js";import{u as Xe}from"./CH4omOaY.js";import{L as Ze}from"./aolhsWpo.js";import{E as J,a as Q}from"./BrSIs9LH.js";import{_ as es}from"./DlAUqK2U.js";import"./BzDRAX2M.js";import"./D5WW2oGZ.js";const ss={class:"login-page flex flex-col !h-[100vh] overflow-hidden relative"},as={class:"flex justify-between mt-[15px]"},ts={class:"form overflow-y-auto scroll"},ns={class:"flex flex-col w-[900px] gap-[25px] pb-[20px]"},ls={class:"company flex flex-col gap-5"},os={class:"flex gap-5 items-center"},is={class:"flex gap-5 items-center"},cs={class:"information flex flex-col gap-5"},rs={class:"flex gap-5 items-center"},ps={class:"flex gap-5 items-center"},ms={class:"flex flex-col gap-[15px] w-[82%]"},ds={class:"flex gap-5 items-center !m-[0px]"},fs={class:"pic-position flex gap-5 items-center w-[50%]"},_s={class:"pic-name flex items-center gap-5 w-[50%]"},us={class:"flex gap-5 items-center !m-[0px]"},xs={class:"pic-name flex items-center gap-5 w-[50%]"},vs={class:"flex flex-col gap-[15px] w-[82%]"},bs={class:"flex gap-5 items-center !m-[0px]"},ys={class:"pic-position flex gap-5 items-center w-[50%]"},gs={class:"pic-name flex items-center gap-5 w-[50%]"},ws={class:"flex gap-5 items-center !m-[0px]"},ks={class:"pic-name flex items-center gap-5 w-[50%]"},hs={class:"contact flex flex-col gap-6"},Ps={class:"flex gap-5 items-center"},Ns={class:"flex gap-5 items-center -mb-[12.5px]"},Ss={class:"flex gap-5 items-center"},Ts={class:"relative !m-[0px]"},Cs={class:"relative"},Es={class:"flex gap-5 items-center"},Fs={class:"!m-[0px]"},As={class:"flex gap-5 items-center"},Ms={class:"flex gap-5 items-center"},Is={class:"flex gap-5 items-center"},$s={class:"relative !m-[0px]"},Ds={class:"relative"},Os={class:"relative w-[82%] !m-[0px]"},Ys={class:"relative w-[82%] !m-[0px] flex gap-2 items-center"},Gs={key:0,class:"ml-[20px]"},Ks={class:"relative w-[82%] !m-[0px] flex gap-2 items-center"},Ls={class:"flex max-w-[900px] justify-between py-[20px]"},Rs={class:"flex gap-5"},Us=W({__name:"index",setup(X){const K=Ge(),_=Ke(),I=We(),{redirectPage:L}=Xe(),N=y(!1),Z=y(),S=y(!1),ee=Le(()=>{var o;return(o=K.masterData)==null?void 0:o.kaigoSoftwares}),$=y(!1),D=y(!1),T=y(!1),R=y(!1),C=y(""),se=he(qe({companyName:p(n.companyName,250),companyNameKana:p(n.companyNameKana,250,!0),companyPostCode:p(n.companyPostCode,10),companyAddress:p(n.companyAddress,250),frontPicPosition:p(n.frontPicPosition,100),frontPicFamilyName:p(n.frontPicFamilyName,100),frontPicGivenName:p(n.frontPicGivenName,100),frontPicFamilyNameKana:p(n.frontPicFamilyNameKana,100,!0),frontPicGivenNameKana:p(n.frontPicGivenNameKana,100,!0),picPosition:p(n.picPosition,100),picFamilyName:p(n.picFamilyName,100),picGivenName:p(n.picGivenName,100),picFamilyNameKana:p(n.picFamilyNameKana,100,!0),picGivenNameKana:p(n.picGivenNameKana,100,!0),phoneNumber:p(n.phoneNumber,20),email:p(n.email,250),password:Qe(M(n.password)),kaigoSoftware:G(ze(Re.ERR002,n.kaigoSoftware)).min(1,M(n.kaigoSoftware)),kaipokeCompanyId:p(n.kaipokeCompanyId,100),kaipokeUserId:p(n.kaipokeUserId,100),kaipokeUserPassword:G(M(n.kaipokeUserPassword)).min(1,M(n.kaipokeUserPassword)),paymentMethod:G().default(H.creditCard),isValidAccountTransfer:Je().default(!1).optional()})),{handleSubmit:ae,values:f,setFieldValue:te}=Pe({validationSchema:se}),ne=()=>{S.value=!S.value},le=()=>{N.value=!N.value},oe=async()=>{const o=f==null?void 0:f.companyPostCode;if(!o){_.setNotify({message:"郵便番号が存在しません。",type:F.error});return}D.value=!0;const a=await _.searchPostalCode(o);if(a!=null&&a.data){const{prefecture:v,city:i}=a.data,c=`${v} ${i}`;te("companyAddress",c),Z.value=a.data}else _.setNotify({message:"郵便番号が存在しません。",type:F.error});D.value=!1};B(()=>f==null?void 0:f.isValidAccountTransfer,()=>{C.value=z(new Date().toString(),"YYYY-MM-DD HH:mm:ss")}),B(()=>f==null?void 0:f.paymentMethod,()=>{C.value=""});const U=ae(async o=>{var v;_.clearNotify(),$.value=!0;const a={...o,keepLastPlanContentFlg:T.value?1:0,...o.isValidAccountTransfer&&{accountTransferValidatedAt:C.value}};await I.createNewCompany(a),$.value=!1,(v=_.notify)!=null&&v.message||ie("顧客情報を登録しました")},({errors:o})=>{const v=Object.keys(n).map(i=>o[i]).find(Boolean)??"";_.setNotify({message:v,type:F.error})}),ie=o=>{R.value=!0,L("/customer"),_.setNotify({message:o,type:F.success})};return(o,a)=>{const v=be,i=ge,c=we,O=ke,E=ye,g=Ne,x=Se,b=Te,ce=Ce,re=Ee,pe=Fe,me=Ae,de=Me,fe=Ie,_e=$e,ue=De,xe=Oe,ve=Ye;return m(),P("div",ss,[s("div",as,[l(R)?k("",!0):(m(),u(v,{key:0,class:"pl-[64px]"}))]),s("form",{class:"register flex flex-col gap-[25px] pl-[64px] pt-[10px] pb-[15px]",onSubmit:a[2]||(a[2]=(...r)=>l(U)&&l(U)(...r))},[s("div",ts,[s("div",ns,[e(i,{label:"必須項目です",position:"left",class:"mb-[10px]"}),s("div",ls,[s("div",os,[e(i,{label:"法人名",class:"w-[160px] flex-shrink-0"}),e(c,{"name-bind":"companyName"})]),s("div",is,[e(i,{label:"フリガナ",class:"w-[160px] flex-shrink-0"}),e(c,{"name-bind":"companyNameKana"})])]),a[18]||(a[18]=s("div",{class:"space"},null,-1)),s("div",cs,[s("div",rs,[e(i,{label:"郵便番号",class:"w-[160px] flex"}),e(c,{"name-bind":"companyPostCode","class-form":"w-[20%]"}),e(O,{onClick:oe,type:"button",variant:"cancel_btn",class:"!m-[0px] !rounded-3xl"},{default:t(()=>[l(D)?(m(),u(l(Ze),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):k("",!0),a[3]||(a[3]=A(" 郵便番号から入力 "))]),_:1})]),s("div",ps,[e(i,{label:"会社所在地",class:"w-[160px] flex-shrink-0"}),e(c,{"name-bind":"companyAddress"})]),e(b,{name:"frontPicPosition"},{default:t(({componentField:r,errors:d})=>[e(x,{class:"flex gap-5"},{default:t(()=>[e(i,{label:"代表者",class:"w-[160px] flex pt-[14px] items-baseline flex-shrink-0"}),s("div",ms,[s("div",ds,[s("div",fs,[a[4]||(a[4]=s("span",{class:"label w-[35px]"},"役職",-1)),e(g,null,{default:t(()=>[e(E,h({type:"text"},r,{class:{"border-red-500":d.length}}),null,16,["class"])]),_:2},1024)]),s("div",_s,[a[5]||(a[5]=s("span",{class:"label flex w-[19%] flex-shrink-0"},"お名前",-1)),e(c,{"name-bind":"frontPicFamilyName",placeholder:"姓","class-input":"text-center"}),e(c,{"name-bind":"frontPicGivenName",placeholder:"名","class-input":"text-center"})])]),s("div",us,[a[7]||(a[7]=s("div",{class:"pic-position flex gap-5 items-center w-[50%]"},null,-1)),s("div",xs,[a[6]||(a[6]=s("span",{class:"label flex w-[19%] flex-shrink-0"},"フリガナ",-1)),e(c,{"name-bind":"frontPicFamilyNameKana",placeholder:"せい","class-input":"text-center"}),e(c,{"name-bind":"frontPicGivenNameKana",placeholder:"めい","class-input":"text-center"})])])])]),_:2},1024)]),_:1}),e(b,{name:"picPosition"},{default:t(({componentField:r,errors:d})=>[e(x,{class:"flex gap-5"},{default:t(()=>[e(i,{label:"ご担当者",class:"w-[160px] flex pt-[14px] items-baseline flex-shrink-0"}),s("div",vs,[s("div",bs,[s("div",ys,[a[8]||(a[8]=s("span",{class:"label w-[35px]"},"役職",-1)),e(g,null,{default:t(()=>[e(E,h({type:"text"},r,{class:{"border-red-500":d.length}}),null,16,["class"])]),_:2},1024)]),s("div",gs,[a[9]||(a[9]=s("span",{class:"label flex w-[19%] flex-shrink-0"},"お名前",-1)),e(c,{"name-bind":"picFamilyName",placeholder:"姓","class-input":"text-center"}),e(c,{"name-bind":"picGivenName",placeholder:"名","class-input":"text-center"})])]),s("div",ws,[a[11]||(a[11]=s("div",{class:"pic-position flex gap-5 items-center w-[50%]"},null,-1)),s("div",ks,[a[10]||(a[10]=s("span",{class:"label flex w-[19%] flex-shrink-0"},"フリガナ",-1)),e(c,{"name-bind":"picFamilyNameKana",placeholder:"せい","class-input":"text-center"}),e(c,{"name-bind":"picGivenNameKana",placeholder:"めい","class-input":"text-center"})])])])]),_:2},1024)]),_:1})]),a[19]||(a[19]=s("div",{class:"space"},null,-1)),s("div",hs,[s("div",Ps,[e(i,{label:"電話番号",class:"w-[160px] flex-shrink-0"}),e(c,{"name-bind":"phoneNumber","class-form":"w-[40%]"})]),s("div",Ns,[e(i,{label:"メールアドレス",class:"w-[160px] flex-shrink-0"}),e(c,{"name-bind":"email"})]),s("div",Ss,[a[12]||(a[12]=s("div",{class:"w-[160px] flex-shrink-0"},[s("span",null,"パスワード")],-1)),e(b,{name:"password"},{default:t(({componentField:r,errors:d})=>[e(x,{class:"w-[100%]"},{default:t(()=>[s("div",Ts,[e(g,null,{default:t(()=>[s("div",Cs,[e(E,h({type:l(N)?"text":"password"},r,{placeholder:"英小文字、数字を含む、半角英数字８文字以上",class:[{"border-red-500":d.length},"placeholder:text-[10px]"]}),null,16,["type","class"]),s("button",{type:"button",class:"absolute right-[15px] top-1/2 transform -translate-y-1/2",onClick:le,"aria-label":"Toggle password visibility"},[l(N)?(m(),u(l(Q),{key:1,class:"h-5 w-3.5 text-black"})):(m(),u(l(J),{key:0,class:"h-5 w-3.5 text-black"}))])])]),_:2},1024)])]),_:2},1024)]),_:1})]),s("div",Es,[e(i,{label:"介護ソフト選択",class:"w-[160px] flex-shrink-0"}),e(b,{name:"kaigoSoftware"},{default:t(({componentField:r,errors:d,meta:w})=>[e(x,{class:"w-[100%]"},{default:t(()=>[s("div",Fs,[e(g,null,{default:t(()=>[e(de,Ue(Ve(r)),{default:t(()=>[e(re,{class:He({"border-red-500":d.length&&!r.modelValue})},{default:t(()=>[e(ce,{placeholder:"Select an option"})]),_:2},1032,["class"]),e(me,null,{default:t(()=>[(m(!0),P(j,null,q(l(ee),V=>(m(),u(pe,{value:`${V.id}`},{default:t(()=>[A(Y(V.name),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:2},1040)]),_:2},1024)])]),_:2},1024)]),_:1})]),s("div",As,[e(i,{label:"カイポケ法人ID",class:"w-[160px] flex-shrink-0"}),e(c,{"name-bind":"kaipokeCompanyId"})]),s("div",Ms,[e(i,{label:"カイポケユーザーID",class:"w-[160px] flex-shrink-0"}),e(c,{"name-bind":"kaipokeUserId"})]),s("div",Is,[e(i,{label:"カイポケパスワード",class:"w-[160px] flex-shrink-0"}),e(b,{name:"kaipokeUserPassword"},{default:t(({componentField:r,errors:d})=>[e(x,{class:"w-[100%]"},{default:t(()=>[s("div",$s,[e(g,null,{default:t(()=>[s("div",Ds,[e(E,h({type:l(S)?"text":"password"},r,{placeholder:"英小文字、数字を含む、半角英数字８文字以上",class:[{"border-red-500":d.length},"placeholder:text-[10px]"]}),null,16,["type","class"]),s("button",{type:"button",class:"absolute right-[15px] top-1/2 transform -translate-y-1/2",onClick:ne,"aria-label":"Toggle password visibility"},[l(S)?(m(),u(l(Q),{key:1,class:"h-5 w-3.5 text-black"})):(m(),u(l(J),{key:0,class:"h-5 w-3.5 text-black"}))])])]),_:2},1024)])]),_:2},1024)]),_:1})]),e(b,{name:"paymentMethod"},{default:t(({componentField:r,errors:d})=>[e(x,{class:"flex gap-5"},{default:t(()=>[e(i,{label:"決済方法",class:"w-[160px] flex-shrink-0"}),s("div",Os,[e(g,null,{default:t(()=>[e(_e,h({class:"flex gap-5"},r),{default:t(()=>[(m(!0),P(j,null,q("PAYMENT_METHOD_OPTIONS_LIST"in o?o.PAYMENT_METHOD_OPTIONS_LIST:l(Be),w=>(m(),u(x,{class:"flex items-center space-y-0 gap-x-3"},{default:t(()=>[e(g,null,{default:t(()=>[e(fe,{value:w.type},null,8,["value"])]),_:2},1024),s("span",null,Y(w.value),1)]),_:2},1024))),256))]),_:2},1040)]),_:2},1024)])]),_:2},1024)]),_:1}),l(f).paymentMethod==("PAYMENT_METHOD_TYPES"in o?o.PAYMENT_METHOD_TYPES:l(H)).accountTransfer?(m(),u(b,{key:0,type:"checkbox",name:"isValidAccountTransfer"},{default:t(({value:r,handleChange:d})=>[e(x,{class:"flex gap-5"},{default:t(()=>[a[14]||(a[14]=s("span",{class:"w-[160px] flex items-center flex-shrink-0"},null,-1)),s("div",Ys,[e(ue,{checked:r,"onUpdate:checked":d},null,8,["checked","onUpdate:checked"]),a[13]||(a[13]=s("span",null,"口座有効",-1)),l(f).isValidAccountTransfer?(m(),P("span",Gs,"最終更新: "+Y(("formatDate"in o?o.formatDate:l(z))(l(C),"YYYY-MM-DD HH:mm:ss")||""),1)):k("",!0)])]),_:2},1024)]),_:1})):k("",!0),e(b,{name:"remainOldPlan"},{default:t(({componentField:r,errors:d})=>[e(x,{class:"flex gap-5"},{default:t(()=>[a[17]||(a[17]=s("span",{class:"w-[160px] flex items-center"},"前回の計画書内容を保持する",-1)),s("div",Ks,[a[15]||(a[15]=s("span",null,"OFF",-1)),e(xe,{checked:l(T),"onUpdate:checked":a[0]||(a[0]=w=>je(T)?T.value=w:null)},null,8,["checked"]),a[16]||(a[16]=s("span",null,"ON",-1))])]),_:1})]),_:1})])])]),s("div",Ls,[s("div",Rs,[e(O,{type:"button",variant:"cancel_btn",class:"flex self-center",onClick:a[1]||(a[1]=r=>l(L)("/customer"))},{default:t(()=>a[20]||(a[20]=[A(" キャンセル ")])),_:1}),e(O,{variant:"export",class:"delete flex self-center"},{default:t(()=>a[21]||(a[21]=[A(" 登録 ")])),_:1})])])],32),l($)?(m(),u(ve,{key:0})):k("",!0)])}}}),Vs=es(Us,[["__scopeId","data-v-78a6db0d"]]),Hs={class:"user-list px-4"},da=W({__name:"index",setup(X){return(K,_)=>{const I=Vs;return m(),P("div",Hs,[_[0]||(_[0]=s("div",{class:"header flex items-center h-[40px] border-b border-b-[#e2e2e2]"},[s("span",{class:"text-base font-bold"},"顧客管理")],-1)),e(I)])}}});export{da as default};
