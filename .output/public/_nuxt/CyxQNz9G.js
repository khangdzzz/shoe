import{t as N,o as O,s as h,f as _,u as P,F as j,L as G,_ as I,a as q,b as z,c as D}from"./ClXgVgti.js";import{_ as K}from"./DCicm_bF.js";import{_ as U}from"./ST1RrhMC.js";import{_ as Y}from"./nz5ZsokI.js";import{m as H,u as J,n as Q,z as W,p as X,s as Z,r as R,M as u,L as ss,c as es,a as t,q as a,b as e,w as o,d as i,A as ts,F as x,o as p,v as F,x as g,y as os}from"./gFyQHj-4.js";import{E as as,a as ns}from"./DRykY-FJ.js";import"./ayn3X2EW.js";import"./DQ241mNi.js";const ls={class:"login-page flex flex-col items-center justify-center h-[100vh]"},rs={class:"min-w-[500px]"},is={class:"relative"},ms={class:"flex flex-col gap-4 justify-center items-end mt-[20px]"},cs={class:"register"},us={class:"forgot"},Ss=H({__name:"index",setup(ps){const f=J(),L=Q(),T=ts(),C=W(),v=X(),{errors:A}=Z(L),m=R(!1),d=R(!1),V=()=>{m.value=!m.value},$=N(O({email:h(_(u.ERR001,x.email)).email({message:u.ERR004}),password:h(_(u.ERR001,x.password)).min(1,_(u.ERR001,x.password))})),{handleSubmit:B}=P({validationSchema:$}),y=B(async b=>{var n,l;d.value=!0;const s=await f.login(b);if((n=A.value)!=null&&n.message)return;const c=(l=s==null?void 0:s.data)==null?void 0:l.accessToken;c&&T.setLocalStorage(ss.accessToken,c),await C.initPermissions(),d.value=!1,f.currentUser&&(f.isAdmin?v.push("/customer"):v.push("/user-list"))});return(b,s)=>{const c=I,n=K,l=q,S=z,w=D,E=j,M=U,k=Y;return p(),es("div",ls,[s[8]||(s[8]=t("div",{class:"logo"},"LOGO",-1)),t("div",rs,[t("form",{class:"bg-white flex flex-col px-12 py-8",onSubmit:s[0]||(s[0]=(...r)=>a(y)&&a(y)(...r))},[e(c),e(E,{name:"email"},{default:o(({componentField:r})=>[e(w,{class:"relative mb-8"},{default:o(()=>[s[1]||(s[1]=t("span",{class:"font-medium"},"メールアドレス",-1)),e(l,null,{default:o(()=>[e(n,F({type:"text",placeholder:"メールアドレス"},r),null,16)]),_:2},1024),e(S,{class:"absolute top-full left-0 mt-1 text-red-500 !m-[0px] !text-[12px] font-normal"})]),_:2},1024)]),_:1}),e(E,{name:"password"},{default:o(({componentField:r})=>[e(w,{class:"relative mb-8"},{default:o(()=>[s[2]||(s[2]=t("span",{class:"font-medium"},"パスワード",-1)),e(l,null,{default:o(()=>[t("div",is,[e(n,F({type:a(m)?"text":"password",placeholder:"パスワード"},r),null,16,["type"]),t("button",{type:"button",class:"absolute right-[15px] top-1/2 transform -translate-y-1/2",onClick:V,"aria-label":"Toggle password visibility"},[a(m)?(p(),g(a(ns),{key:1,class:"h-5 w-3.5 text-black"})):(p(),g(a(as),{key:0,class:"h-5 w-3.5 text-black"}))])])]),_:2},1024),e(S,{class:"absolute top-full left-0 mt-1 text-red-500 !m-[0px] !text-[12px] font-normal"})]),_:2},1024)]),_:1}),e(M,{type:"submit",class:"flex self-center"},{default:o(()=>[a(d)?(p(),g(a(G),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):os("",!0),s[3]||(s[3]=i(" ログイン "))]),_:1})],32),t("div",ms,[t("div",cs,[s[5]||(s[5]=i(" 初めての方は ")),e(k,{to:"/auth-mail",class:"hover:underline"},{default:o(()=>s[4]||(s[4]=[i("「新規登録」")])),_:1})]),t("div",us,[s[7]||(s[7]=i(" パスワードを忘れた場合は ")),e(k,{to:"/forgot-password",class:"hover:underline"},{default:o(()=>s[6]||(s[6]=[i("「こちら」")])),_:1})])])])])}}});export{Ss as default};
