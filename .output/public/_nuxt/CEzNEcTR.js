import{_ as Lt,a as At,b as Pt,d as jt,e as Ot,f as Rt,c as An}from"./CxkwW67V.js";import{h as $e,c as Pn}from"./CLqMo6Cc.js";import{m as H,z as Y,o as I,v as R,w as b,K as me,q as Nt,p as d,n as Ue,r as S,g as z,J as ae,h as jn,b as h,d as K,H as te,aa as pt,S as Le,c as A,D as oe,E as re,a as m,t as O,C as G,A as Fe,B as Ve,L as On,Y as we,_ as Rn,X as Ee,x as J,N as Nn,ac as mt,R as Bt,ad as Bn,ae as ht,af as Un,M as Fn,U as ee}from"./SqyME3h0.js";import{u as Vn}from"./DFvISafz.js";import{a as Yn,S as gt,_ as Hn}from"./Bsm1hXfy.js";import{c as Ut,a as zn,N as Kn,L as Gn,z as qn,j as Jn,G as Qn,U as Wn,H as Xn,q as Zn,Y as es,F as ts,x as Ft,k as ns,V as ss,b as os,M as rs,O as as,_ as Vt}from"./wtGqw_-H.js";import{_ as le}from"./DlAUqK2U.js";import{g as ls,C as is,j as cs,V as us,X as ds,f as ve,S as fs,_ as ps,A as ms,a as hs,b as gs}from"./BUBtWdh3.js";import{C as ys}from"./DmvRkezx.js";import{C as vs}from"./B8eZdOcz.js";import{L as Yt}from"./CJ2Zozuh.js";import{_ as _s}from"./BWhofE_j.js";import{_ as bs,a as xs,b as Ss,c as ws,d as Cs}from"./D90bSfV5.js";import{_ as ks}from"./LcMW-m0y.js";import{_ as Ts}from"./sj3pR7b_.js";import"./hIsFu9lA.js";import"./WGlUCMUl.js";const Is=H({__name:"AlertDialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const s=e,n=Y(()=>{const{class:o,...t}=s;return t});return(o,t)=>(I(),R(d(zn),Nt(n.value,{class:d(Ut)("text-sm text-muted-foreground",s.class)}),{default:b(()=>[me(o.$slots,"default")]),_:3},16,["class"]))}}),Es=H({__name:"notify-register-payment",setup(e){const s=Ue(),{redirectPage:n}=Vn(),o=S(!1),t=Y(()=>s.isLoadPermission);z(t,()=>{o.value=!$e()});const r=()=>{o.value=!1,n("/mypage")};ae(()=>{setTimeout(()=>{o.value=!$e()},200),window.addEventListener("keydown",a)}),jn(()=>{window.removeEventListener("keydown",a)});const a=l=>{l.key==="Escape"&&o.value&&(l.stopPropagation(),l.preventDefault())};return(l,c)=>{const i=Lt,p=At,_=Pt,y=jt,g=Ot,k=Rt;return I(),R(k,{open:d(o),"onUpdate:open":c[0]||(c[0]=w=>te(o)?o.value=w:null)},{default:b(()=>[h(g,null,{default:b(()=>[h(p,{class:"flex flex-col gap-4 items-center"},{default:b(()=>[h(i,{class:"text-sm"},{default:b(()=>c[1]||(c[1]=[K("決済方法は設定完了していないので、マイページより設定完了してください。")])),_:1})]),_:1}),h(y,{class:"flex !flex-col gap-4"},{default:b(()=>[h(_,{class:"flex self-center min-w-[120px]",onClick:r},{default:b(()=>c[2]||(c[2]=[K("登録")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}}),de=/^[a-z0-9]+(-[a-z0-9]+)*$/,Ce=(e,s,n,o="")=>{const t=e.split(":");if(e.slice(0,1)==="@"){if(t.length<2||t.length>3)return null;o=t.shift().slice(1)}if(t.length>3||!t.length)return null;if(t.length>1){const l=t.pop(),c=t.pop(),i={provider:t.length>0?t[0]:o,prefix:c,name:l};return s&&!_e(i)?null:i}const r=t[0],a=r.split("-");if(a.length>1){const l={provider:o,prefix:a.shift(),name:a.join("-")};return s&&!_e(l)?null:l}if(n&&o===""){const l={provider:o,prefix:"",name:r};return s&&!_e(l,n)?null:l}return null},_e=(e,s)=>e?!!((e.provider===""||e.provider.match(de))&&(s&&e.prefix===""||e.prefix.match(de))&&e.name.match(de)):!1,Ht=Object.freeze({left:0,top:0,width:16,height:16}),Se=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),ke=Object.freeze({...Ht,...Se}),Ae=Object.freeze({...ke,body:"",hidden:!1});function Ds(e,s){const n={};!e.hFlip!=!s.hFlip&&(n.hFlip=!0),!e.vFlip!=!s.vFlip&&(n.vFlip=!0);const o=((e.rotate||0)+(s.rotate||0))%4;return o&&(n.rotate=o),n}function yt(e,s){const n=Ds(e,s);for(const o in Ae)o in Se?o in e&&!(o in n)&&(n[o]=Se[o]):o in s?n[o]=s[o]:o in e&&(n[o]=e[o]);return n}function Ms(e,s){const n=e.icons,o=e.aliases||Object.create(null),t=Object.create(null);function r(a){if(n[a])return t[a]=[];if(!(a in t)){t[a]=null;const l=o[a]&&o[a].parent,c=l&&r(l);c&&(t[a]=[l].concat(c))}return t[a]}return Object.keys(n).concat(Object.keys(o)).forEach(r),t}function $s(e,s,n){const o=e.icons,t=e.aliases||Object.create(null);let r={};function a(l){r=yt(o[l]||t[l],r)}return a(s),n.forEach(a),yt(e,r)}function zt(e,s){const n=[];if(typeof e!="object"||typeof e.icons!="object")return n;e.not_found instanceof Array&&e.not_found.forEach(t=>{s(t,null),n.push(t)});const o=Ms(e);for(const t in o){const r=o[t];r&&(s(t,$s(e,t,r)),n.push(t))}return n}const Ls={provider:"",aliases:{},not_found:{},...Ht};function De(e,s){for(const n in s)if(n in e&&typeof e[n]!=typeof s[n])return!1;return!0}function Kt(e){if(typeof e!="object"||e===null)return null;const s=e;if(typeof s.prefix!="string"||!e.icons||typeof e.icons!="object"||!De(e,Ls))return null;const n=s.icons;for(const t in n){const r=n[t];if(!t.match(de)||typeof r.body!="string"||!De(r,Ae))return null}const o=s.aliases||Object.create(null);for(const t in o){const r=o[t],a=r.parent;if(!t.match(de)||typeof a!="string"||!n[a]&&!o[a]||!De(r,Ae))return null}return s}const vt=Object.create(null);function As(e,s){return{provider:e,prefix:s,icons:Object.create(null),missing:new Set}}function se(e,s){const n=vt[e]||(vt[e]=Object.create(null));return n[s]||(n[s]=As(e,s))}function Ye(e,s){return Kt(s)?zt(s,(n,o)=>{o?e.icons[n]=o:e.missing.add(n)}):[]}function Ps(e,s,n){try{if(typeof n.body=="string")return e.icons[s]={...n},!0}catch{}return!1}let fe=!1;function Gt(e){return typeof e=="boolean"&&(fe=e),fe}function js(e){const s=typeof e=="string"?Ce(e,!0,fe):e;if(s){const n=se(s.provider,s.prefix),o=s.name;return n.icons[o]||(n.missing.has(o)?null:void 0)}}function Os(e,s){const n=Ce(e,!0,fe);if(!n)return!1;const o=se(n.provider,n.prefix);return Ps(o,n.name,s)}function Rs(e,s){if(typeof e!="object")return!1;if(typeof s!="string"&&(s=e.provider||""),fe&&!s&&!e.prefix){let t=!1;return Kt(e)&&(e.prefix="",zt(e,(r,a)=>{a&&Os(r,a)&&(t=!0)})),t}const n=e.prefix;if(!_e({provider:s,prefix:n,name:"a"}))return!1;const o=se(s,n);return!!Ye(o,e)}const qt=Object.freeze({width:null,height:null}),Jt=Object.freeze({...qt,...Se}),Ns=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Bs=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function _t(e,s,n){if(s===1)return e;if(n=n||100,typeof e=="number")return Math.ceil(e*s*n)/n;if(typeof e!="string")return e;const o=e.split(Ns);if(o===null||!o.length)return e;const t=[];let r=o.shift(),a=Bs.test(r);for(;;){if(a){const l=parseFloat(r);isNaN(l)?t.push(r):t.push(Math.ceil(l*s*n)/n)}else t.push(r);if(r=o.shift(),r===void 0)return t.join("");a=!a}}function Us(e,s="defs"){let n="";const o=e.indexOf("<"+s);for(;o>=0;){const t=e.indexOf(">",o),r=e.indexOf("</"+s);if(t===-1||r===-1)break;const a=e.indexOf(">",r);if(a===-1)break;n+=e.slice(t+1,r).trim(),e=e.slice(0,o).trim()+e.slice(a+1)}return{defs:n,content:e}}function Fs(e,s){return e?"<defs>"+e+"</defs>"+s:s}function Vs(e,s,n){const o=Us(e);return Fs(o.defs,s+o.content+n)}const Ys=e=>e==="unset"||e==="undefined"||e==="none";function Hs(e,s){const n={...ke,...e},o={...Jt,...s},t={left:n.left,top:n.top,width:n.width,height:n.height};let r=n.body;[n,o].forEach(w=>{const v=[],N=w.hFlip,E=w.vFlip;let C=w.rotate;N?E?C+=2:(v.push("translate("+(t.width+t.left).toString()+" "+(0-t.top).toString()+")"),v.push("scale(-1 1)"),t.top=t.left=0):E&&(v.push("translate("+(0-t.left).toString()+" "+(t.height+t.top).toString()+")"),v.push("scale(1 -1)"),t.top=t.left=0);let j;switch(C<0&&(C-=Math.floor(C/4)*4),C=C%4,C){case 1:j=t.height/2+t.top,v.unshift("rotate(90 "+j.toString()+" "+j.toString()+")");break;case 2:v.unshift("rotate(180 "+(t.width/2+t.left).toString()+" "+(t.height/2+t.top).toString()+")");break;case 3:j=t.width/2+t.left,v.unshift("rotate(-90 "+j.toString()+" "+j.toString()+")");break}C%2===1&&(t.left!==t.top&&(j=t.left,t.left=t.top,t.top=j),t.width!==t.height&&(j=t.width,t.width=t.height,t.height=j)),v.length&&(r=Vs(r,'<g transform="'+v.join(" ")+'">',"</g>"))});const a=o.width,l=o.height,c=t.width,i=t.height;let p,_;a===null?(_=l===null?"1em":l==="auto"?i:l,p=_t(_,c/i)):(p=a==="auto"?c:a,_=l===null?_t(p,i/c):l==="auto"?i:l);const y={},g=(w,v)=>{Ys(v)||(y[w]=v.toString())};g("width",p),g("height",_);const k=[t.left,t.top,c,i];return y.viewBox=k.join(" "),{attributes:y,viewBox:k,body:r}}const zs=/\sid="(\S+)"/g,Ks="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let Gs=0;function qs(e,s=Ks){const n=[];let o;for(;o=zs.exec(e);)n.push(o[1]);if(!n.length)return e;const t="suffix"+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(r=>{const a=typeof s=="function"?s(r):s+(Gs++).toString(),l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+l+')([")]|\\.[a-z])',"g"),"$1"+a+t+"$3")}),e=e.replace(new RegExp(t,"g"),""),e}const Pe=Object.create(null);function Js(e,s){Pe[e]=s}function je(e){return Pe[e]||Pe[""]}function He(e){let s;if(typeof e.resources=="string")s=[e.resources];else if(s=e.resources,!(s instanceof Array)||!s.length)return null;return{resources:s,path:e.path||"/",maxURL:e.maxURL||500,rotate:e.rotate||750,timeout:e.timeout||5e3,random:e.random===!0,index:e.index||0,dataAfterTimeout:e.dataAfterTimeout!==!1}}const ze=Object.create(null),ue=["https://api.simplesvg.com","https://api.unisvg.com"],be=[];for(;ue.length>0;)ue.length===1||Math.random()>.5?be.push(ue.shift()):be.push(ue.pop());ze[""]=He({resources:["https://api.iconify.design"].concat(be)});function Qs(e,s){const n=He(s);return n===null?!1:(ze[e]=n,!0)}function Ke(e){return ze[e]}const Ws=()=>{let e;try{if(e=fetch,typeof e=="function")return e}catch{}};let bt=Ws();function Xs(e,s){const n=Ke(e);if(!n)return 0;let o;if(!n.maxURL)o=0;else{let t=0;n.resources.forEach(a=>{t=Math.max(t,a.length)});const r=s+".json?icons=";o=n.maxURL-t-n.path.length-r.length}return o}function Zs(e){return e===404}const eo=(e,s,n)=>{const o=[],t=Xs(e,s),r="icons";let a={type:r,provider:e,prefix:s,icons:[]},l=0;return n.forEach((c,i)=>{l+=c.length+1,l>=t&&i>0&&(o.push(a),a={type:r,provider:e,prefix:s,icons:[]},l=c.length),a.icons.push(c)}),o.push(a),o};function to(e){if(typeof e=="string"){const s=Ke(e);if(s)return s.path}return"/"}const no=(e,s,n)=>{if(!bt){n("abort",424);return}let o=to(s.provider);switch(s.type){case"icons":{const r=s.prefix,l=s.icons.join(","),c=new URLSearchParams({icons:l});o+=r+".json?"+c.toString();break}case"custom":{const r=s.uri;o+=r.slice(0,1)==="/"?r.slice(1):r;break}default:n("abort",400);return}let t=503;bt(e+o).then(r=>{const a=r.status;if(a!==200){setTimeout(()=>{n(Zs(a)?"abort":"next",a)});return}return t=501,r.json()}).then(r=>{if(typeof r!="object"||r===null){setTimeout(()=>{r===404?n("abort",r):n("next",t)});return}setTimeout(()=>{n("success",r)})}).catch(()=>{n("next",t)})},so={prepare:eo,send:no};function oo(e){const s={loaded:[],missing:[],pending:[]},n=Object.create(null);e.sort((t,r)=>t.provider!==r.provider?t.provider.localeCompare(r.provider):t.prefix!==r.prefix?t.prefix.localeCompare(r.prefix):t.name.localeCompare(r.name));let o={provider:"",prefix:"",name:""};return e.forEach(t=>{if(o.name===t.name&&o.prefix===t.prefix&&o.provider===t.provider)return;o=t;const r=t.provider,a=t.prefix,l=t.name,c=n[r]||(n[r]=Object.create(null)),i=c[a]||(c[a]=se(r,a));let p;l in i.icons?p=s.loaded:a===""||i.missing.has(l)?p=s.missing:p=s.pending;const _={provider:r,prefix:a,name:l};p.push(_)}),s}function Qt(e,s){e.forEach(n=>{const o=n.loaderCallbacks;o&&(n.loaderCallbacks=o.filter(t=>t.id!==s))})}function ro(e){e.pendingCallbacksFlag||(e.pendingCallbacksFlag=!0,setTimeout(()=>{e.pendingCallbacksFlag=!1;const s=e.loaderCallbacks?e.loaderCallbacks.slice(0):[];if(!s.length)return;let n=!1;const o=e.provider,t=e.prefix;s.forEach(r=>{const a=r.icons,l=a.pending.length;a.pending=a.pending.filter(c=>{if(c.prefix!==t)return!0;const i=c.name;if(e.icons[i])a.loaded.push({provider:o,prefix:t,name:i});else if(e.missing.has(i))a.missing.push({provider:o,prefix:t,name:i});else return n=!0,!0;return!1}),a.pending.length!==l&&(n||Qt([e],r.id),r.callback(a.loaded.slice(0),a.missing.slice(0),a.pending.slice(0),r.abort))})}))}let ao=0;function lo(e,s,n){const o=ao++,t=Qt.bind(null,n,o);if(!s.pending.length)return t;const r={id:o,icons:s,callback:e,abort:t};return n.forEach(a=>{(a.loaderCallbacks||(a.loaderCallbacks=[])).push(r)}),t}function io(e,s=!0,n=!1){const o=[];return e.forEach(t=>{const r=typeof t=="string"?Ce(t,s,n):t;r&&o.push(r)}),o}var co={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function uo(e,s,n,o){const t=e.resources.length,r=e.random?Math.floor(Math.random()*t):e.index;let a;if(e.random){let $=e.resources.slice(0);for(a=[];$.length>1;){const B=Math.floor(Math.random()*$.length);a.push($[B]),$=$.slice(0,B).concat($.slice(B+1))}a=a.concat($)}else a=e.resources.slice(r).concat(e.resources.slice(0,r));const l=Date.now();let c="pending",i=0,p,_=null,y=[],g=[];typeof o=="function"&&g.push(o);function k(){_&&(clearTimeout(_),_=null)}function w(){c==="pending"&&(c="aborted"),k(),y.forEach($=>{$.status==="pending"&&($.status="aborted")}),y=[]}function v($,B){B&&(g=[]),typeof $=="function"&&g.push($)}function N(){return{startTime:l,payload:s,status:c,queriesSent:i,queriesPending:y.length,subscribe:v,abort:w}}function E(){c="failed",g.forEach($=>{$(void 0,p)})}function C(){y.forEach($=>{$.status==="pending"&&($.status="aborted")}),y=[]}function j($,B,q){const X=B!=="success";switch(y=y.filter(U=>U!==$),c){case"pending":break;case"failed":if(X||!e.dataAfterTimeout)return;break;default:return}if(B==="abort"){p=q,E();return}if(X){p=q,y.length||(a.length?Q():E());return}if(k(),C(),!e.random){const U=e.resources.indexOf($.resource);U!==-1&&U!==e.index&&(e.index=U)}c="completed",g.forEach(U=>{U(q)})}function Q(){if(c!=="pending")return;k();const $=a.shift();if($===void 0){if(y.length){_=setTimeout(()=>{k(),c==="pending"&&(C(),E())},e.timeout);return}E();return}const B={status:"pending",resource:$,callback:(q,X)=>{j(B,q,X)}};y.push(B),i++,_=setTimeout(Q,e.rotate),n($,s,B.callback)}return setTimeout(Q),N}function Wt(e){const s={...co,...e};let n=[];function o(){n=n.filter(l=>l().status==="pending")}function t(l,c,i){const p=uo(s,l,c,(_,y)=>{o(),i&&i(_,y)});return n.push(p),p}function r(l){return n.find(c=>l(c))||null}return{query:t,find:r,setIndex:l=>{s.index=l},getIndex:()=>s.index,cleanup:o}}function xt(){}const Me=Object.create(null);function fo(e){if(!Me[e]){const s=Ke(e);if(!s)return;const n=Wt(s),o={config:s,redundancy:n};Me[e]=o}return Me[e]}function po(e,s,n){let o,t;if(typeof e=="string"){const r=je(e);if(!r)return n(void 0,424),xt;t=r.send;const a=fo(e);a&&(o=a.redundancy)}else{const r=He(e);if(r){o=Wt(r);const a=e.resources?e.resources[0]:"",l=je(a);l&&(t=l.send)}}return!o||!t?(n(void 0,424),xt):o.query(s,t,n)().abort}const St="iconify2",pe="iconify",Xt=pe+"-count",wt=pe+"-version",Zt=36e5,mo=168,ho=50;function Oe(e,s){try{return e.getItem(s)}catch{}}function Ge(e,s,n){try{return e.setItem(s,n),!0}catch{}}function Ct(e,s){try{e.removeItem(s)}catch{}}function Re(e,s){return Ge(e,Xt,s.toString())}function Ne(e){return parseInt(Oe(e,Xt))||0}const Te={local:!0,session:!0},en={local:new Set,session:new Set};let qe=!1;function go(e){qe=e}let ye=typeof window>"u"?{}:window;function tn(e){const s=e+"Storage";try{if(ye&&ye[s]&&typeof ye[s].length=="number")return ye[s]}catch{}Te[e]=!1}function nn(e,s){const n=tn(e);if(!n)return;const o=Oe(n,wt);if(o!==St){if(o){const l=Ne(n);for(let c=0;c<l;c++)Ct(n,pe+c.toString())}Ge(n,wt,St),Re(n,0);return}const t=Math.floor(Date.now()/Zt)-mo,r=l=>{const c=pe+l.toString(),i=Oe(n,c);if(typeof i=="string"){try{const p=JSON.parse(i);if(typeof p=="object"&&typeof p.cached=="number"&&p.cached>t&&typeof p.provider=="string"&&typeof p.data=="object"&&typeof p.data.prefix=="string"&&s(p,l))return!0}catch{}Ct(n,c)}};let a=Ne(n);for(let l=a-1;l>=0;l--)r(l)||(l===a-1?(a--,Re(n,a)):en[e].add(l))}function sn(){if(!qe){go(!0);for(const e in Te)nn(e,s=>{const n=s.data,o=s.provider,t=n.prefix,r=se(o,t);if(!Ye(r,n).length)return!1;const a=n.lastModified||-1;return r.lastModifiedCached=r.lastModifiedCached?Math.min(r.lastModifiedCached,a):a,!0})}}function yo(e,s){const n=e.lastModifiedCached;if(n&&n>=s)return n===s;if(e.lastModifiedCached=s,n)for(const o in Te)nn(o,t=>{const r=t.data;return t.provider!==e.provider||r.prefix!==e.prefix||r.lastModified===s});return!0}function vo(e,s){qe||sn();function n(o){let t;if(!Te[o]||!(t=tn(o)))return;const r=en[o];let a;if(r.size)r.delete(a=Array.from(r).shift());else if(a=Ne(t),a>=ho||!Re(t,a+1))return;const l={cached:Math.floor(Date.now()/Zt),provider:e.provider,data:s};return Ge(t,pe+a.toString(),JSON.stringify(l))}s.lastModified&&!yo(e,s.lastModified)||Object.keys(s.icons).length&&(s.not_found&&(s=Object.assign({},s),delete s.not_found),n("local")||n("session"))}function kt(){}function _o(e){e.iconsLoaderFlag||(e.iconsLoaderFlag=!0,setTimeout(()=>{e.iconsLoaderFlag=!1,ro(e)}))}function bo(e,s){e.iconsToLoad?e.iconsToLoad=e.iconsToLoad.concat(s).sort():e.iconsToLoad=s,e.iconsQueueFlag||(e.iconsQueueFlag=!0,setTimeout(()=>{e.iconsQueueFlag=!1;const{provider:n,prefix:o}=e,t=e.iconsToLoad;delete e.iconsToLoad;let r;if(!t||!(r=je(n)))return;r.prepare(n,o,t).forEach(l=>{po(n,l,c=>{if(typeof c!="object")l.icons.forEach(i=>{e.missing.add(i)});else try{const i=Ye(e,c);if(!i.length)return;const p=e.pendingIcons;p&&i.forEach(_=>{p.delete(_)}),vo(e,c)}catch(i){console.error(i)}_o(e)})})}))}const xo=(e,s)=>{const n=io(e,!0,Gt()),o=oo(n);if(!o.pending.length){let c=!0;return s&&setTimeout(()=>{c&&s(o.loaded,o.missing,o.pending,kt)}),()=>{c=!1}}const t=Object.create(null),r=[];let a,l;return o.pending.forEach(c=>{const{provider:i,prefix:p}=c;if(p===l&&i===a)return;a=i,l=p,r.push(se(i,p));const _=t[i]||(t[i]=Object.create(null));_[p]||(_[p]=[])}),o.pending.forEach(c=>{const{provider:i,prefix:p,name:_}=c,y=se(i,p),g=y.pendingIcons||(y.pendingIcons=new Set);g.has(_)||(g.add(_),t[i][p].push(_))}),r.forEach(c=>{const{provider:i,prefix:p}=c;t[i][p].length&&bo(c,t[i][p])}),s?lo(s,o,r):kt};function So(e,s){const n={...e};for(const o in s){const t=s[o],r=typeof t;o in qt?(t===null||t&&(r==="string"||r==="number"))&&(n[o]=t):r===typeof n[o]&&(n[o]=o==="rotate"?t%4:t)}return n}const wo=/[\s,]+/;function Co(e,s){s.split(wo).forEach(n=>{switch(n.trim()){case"horizontal":e.hFlip=!0;break;case"vertical":e.vFlip=!0;break}})}function ko(e,s=0){const n=e.replace(/^-?[0-9.]*/,"");function o(t){for(;t<0;)t+=4;return t%4}if(n===""){const t=parseInt(e);return isNaN(t)?0:o(t)}else if(n!==e){let t=0;switch(n){case"%":t=25;break;case"deg":t=90}if(t){let r=parseFloat(e.slice(0,e.length-n.length));return isNaN(r)?0:(r=r/t,r%1===0?o(r):0)}}return s}function To(e,s){let n=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const o in s)n+=" "+o+'="'+s[o]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+e+"</svg>"}function Io(e){return e.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function Eo(e){return"data:image/svg+xml,"+Io(e)}function Do(e){return'url("'+Eo(e)+'")'}const Tt={...Jt,inline:!1},Mo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},$o={display:"inline-block"},Be={backgroundColor:"currentColor"},on={backgroundColor:"transparent"},It={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},Et={webkitMask:Be,mask:Be,background:on};for(const e in Et){const s=Et[e];for(const n in It)s[e+n]=It[n]}const xe={};["horizontal","vertical"].forEach(e=>{const s=e.slice(0,1)+"Flip";xe[e+"-flip"]=s,xe[e.slice(0,1)+"-flip"]=s,xe[e+"Flip"]=s});function Dt(e){return e+(e.match(/^[-0-9.]+$/)?"px":"")}const Mt=(e,s)=>{const n=So(Tt,s),o={...Mo},t=s.mode||"svg",r={},a=s.style,l=typeof a=="object"&&!(a instanceof Array)?a:{};for(let w in s){const v=s[w];if(v!==void 0)switch(w){case"icon":case"style":case"onLoad":case"mode":break;case"inline":case"hFlip":case"vFlip":n[w]=v===!0||v==="true"||v===1;break;case"flip":typeof v=="string"&&Co(n,v);break;case"color":r.color=v;break;case"rotate":typeof v=="string"?n[w]=ko(v):typeof v=="number"&&(n[w]=v);break;case"ariaHidden":case"aria-hidden":v!==!0&&v!=="true"&&delete o["aria-hidden"];break;default:{const N=xe[w];N?(v===!0||v==="true"||v===1)&&(n[N]=!0):Tt[w]===void 0&&(o[w]=v)}}}const c=Hs(e,n),i=c.attributes;if(n.inline&&(r.verticalAlign="-0.125em"),t==="svg"){o.style={...r,...l},Object.assign(o,i);let w=0,v=s.id;return typeof v=="string"&&(v=v.replace(/-/g,"_")),o.innerHTML=qs(c.body,v?()=>v+"ID"+w++:"iconifyVue"),pt("svg",o)}const{body:p,width:_,height:y}=e,g=t==="mask"||(t==="bg"?!1:p.indexOf("currentColor")!==-1),k=To(p,{...i,width:_+"",height:y+""});return o.style={...r,"--svg":Do(k),width:Dt(i.width),height:Dt(i.height),...$o,...g?Be:on,...l},pt("span",o)};Gt(!0);Js("",so);if(typeof document<"u"&&typeof window<"u"){sn();const e=window;if(e.IconifyPreload!==void 0){const s=e.IconifyPreload,n="Invalid IconifyPreload syntax.";typeof s=="object"&&s!==null&&(s instanceof Array?s:[s]).forEach(o=>{try{(typeof o!="object"||o===null||o instanceof Array||typeof o.icons!="object"||typeof o.prefix!="string"||!Rs(o))&&console.error(n)}catch{console.error(n)}})}if(e.IconifyProviders!==void 0){const s=e.IconifyProviders;if(typeof s=="object"&&s!==null)for(let n in s){const o="IconifyProviders["+n+"] is invalid.";try{const t=s[n];if(typeof t!="object"||!t||t.resources===void 0)continue;Qs(n,t)||console.error(o)}catch{console.error(o)}}}}const Lo={...ke,body:""},$t=H({inheritAttrs:!1,data(){return{_name:"",_loadingIcon:null,iconMounted:!1,counter:0}},mounted(){this.iconMounted=!0},unmounted(){this.abortLoading()},methods:{abortLoading(){this._loadingIcon&&(this._loadingIcon.abort(),this._loadingIcon=null)},getIcon(e,s){if(typeof e=="object"&&e!==null&&typeof e.body=="string")return this._name="",this.abortLoading(),{data:e};let n;if(typeof e!="string"||(n=Ce(e,!1,!0))===null)return this.abortLoading(),null;const o=js(n);if(!o)return(!this._loadingIcon||this._loadingIcon.name!==e)&&(this.abortLoading(),this._name="",o!==null&&(this._loadingIcon={name:e,abort:xo([n],()=>{this.counter++})})),null;this.abortLoading(),this._name!==e&&(this._name=e,s&&s(e));const t=["iconify"];return n.prefix!==""&&t.push("iconify--"+n.prefix),n.provider!==""&&t.push("iconify--"+n.provider),{data:o,classes:t}}},render(){this.counter;const e=this.$attrs,s=this.iconMounted||e.ssr?this.getIcon(e.icon,e.onLoad):null;if(!s)return Mt(Lo,e);let n=e;return s.classes&&(n={...e,class:(typeof e.class=="string"?e.class+" ":"")+s.classes.join(" ")}),Mt({...ke,...s.data},n)}}),Ao=H({__name:"auto-complete",props:{width:{type:String,default:"100%"},options:{type:Array,default:()=>[]},valueSelected:{type:String,default:""}},emits:["update:selectedValue"],setup(e,{emit:s}){const n=e,o=s,t=S(n.valueSelected);return z(()=>n.valueSelected,()=>{t.value=n.valueSelected}),z(t,r=>{o("update:selectedValue",r)}),ae(()=>{t.value&&o("update:selectedValue",t.value)}),(r,a)=>(I(),R(d(ts),{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=l=>t.value=l),class:"relative"},{default:b(()=>[h(d(Kn),{style:Le({width:e.width}),class:"min-w-[120px] w-full inline-flex items-center justify-between rounded px-[15px] leading-none h-[30px] gap-[5px] bg-white hover:bg-mauve3 focus:shadow-[0_0_0_2px] focus:shadow-black data-[placeholder]:text-grass9 outline-none border border-input"},{default:b(()=>[h(d(Gn),{class:"!bg-transparent w-full outline-none h-full selection:bg-grass5 placeholder-mauve8"}),h(d(qn),null,{default:b(()=>[h(d($t),{icon:"radix-icons:chevron-down",class:"h-4 w-4"})]),_:1})]),_:1},8,["style"]),h(d(Jn),{style:Le({width:e.width}),class:"combobox-content absolute !z-12 w-full mt-[1px] min-w-[120px] bg-white overflow-hidden rounded shadow-[0px_10px_38px_-10px_rgba(22,_23,_24,_0.35),_0px_10px_20px_-15px_rgba(22,_23,_24,_0.2)] will-change-[opacity,transform] data-[side=top]:animate-slideDownAndFade data-[side=right]:animate-slideLeftAndFade data-[side=bottom]:animate-slideUpAndFade data-[side=left]:animate-slideRightAndFade"},{default:b(()=>[h(d(Qn),{class:"p-[5px]"},{default:b(()=>[h(d(Wn),{class:"text-mauve8 text-xs font-medium text-center py-2"}),h(d(Xn),null,{default:b(()=>[(I(!0),A(oe,null,re(e.options,(l,c)=>(I(),R(d(Zn),{key:c,class:"text-[13px] leading-none rounded-[3px] flex items-center h-[25px] pr-[35px] pl-[25px] relative select-none data-[disabled]:text-mauve8 data-[disabled]:pointer-events-none data-[highlighted]:outline-none data-[highlighted]:bg-mauve3 data-[highlighted]:text-black",value:l},{default:b(()=>[h(d(es),{class:"absolute left-0 w-[25px] inline-flex items-center justify-center"},{default:b(()=>[h(d($t),{icon:"radix-icons:check"})]),_:1}),m("span",null,O(l),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["style"])]),_:1},8,["modelValue"]))}}),Po=le(Ao,[["__scopeId","data-v-bc0fcfc5"]]),jo={class:"date-search flex items-center gap-3"},Oo={class:"label font-medium"},Ro={class:"flex items-center gap-2"},No={class:"h-[30px] flex items-center justify-between px-4 bg-white rounded cursor-pointer"},Bo=["disabled"],Uo=H({__name:"date",props:{title:{}},emits:["update:selectedDate"],setup(e,{emit:s}){const n=s,o=()=>{const y=new Date,g=y.getFullYear(),k=y.getMonth()+1;return{year:g,month:k}},t=S(o().year),r=S(o()),a=S(""),l=()=>{const{year:y,month:g}=r.value;a.value=`${y}/${g.toString().padStart(2,"0")}`,n("update:selectedDate",a.value)},c=y=>{let{year:g,month:k}=r.value;k+=y,k>12?(k=1,g+=1):k<1&&(k=12,g-=1),i.value={year:g,month:k-1}};ae(()=>{l()});const i=S({year:r.value.year,month:r.value.month-1});z(i,()=>{r.value={year:i.value.year,month:i.value.month+1},t.value=i.value.year,l()});const p=Y(()=>{const y=new Date;return r.value.year>y.getFullYear()||r.value.year===y.getFullYear()&&r.value.month>=y.getMonth()+1}),_=Y(()=>{const y=new Date,g=y.getFullYear(),k=y.getMonth();return t.value===g?{months:Array.from({length:12},(w,v)=>{const N=new Date(g,v);return v>k?ls(N):null}).filter(Boolean)}:{months:t.value>g?Array.from({length:12},(w,v)=>v):[]}});return(y,g)=>(I(),A("div",jo,[m("span",Oo,O(y.title),1),m("div",Ro,[m("button",{class:"flex items-center gap-1 bg-gray-300 text-gray-700 pl-2 pr-3 py-[5px] rounded-md hover:bg-gray-400",onClick:g[0]||(g[0]=k=>c(-1))},[h(d(is),{class:"w-4 h-4"}),g[4]||(g[4]=K(" 前月 "))]),h(d(us),{modelValue:d(i),"onUpdate:modelValue":g[1]||(g[1]=k=>te(i)?i.value=k:null),"month-picker":"","auto-apply":"","format-locale":d(cs),format:"E",filters:d(_),onUpdateMonthYear:g[2]||(g[2]=k=>t.value=k.year)},{trigger:b(()=>[m("div",No,[m("span",null,O(d(a)),1),h(d(ys),{class:"w-4 h-4"})])]),_:1},8,["modelValue","format-locale","filters"]),m("button",{class:G(["flex items-center gap-1 bg-gray-300 text-gray-700 pl-3 pr-2 py-[5px] rounded-md",{"opacity-50":d(p),"hover:bg-gray-400":!d(p)}]),onClick:g[3]||(g[3]=k=>c(1)),disabled:d(p)},[g[5]||(g[5]=K(" 翌月 ")),h(d(vs),{class:"w-4 h-4"})],10,Bo)])]))}}),Fo=le(Uo,[["__scopeId","data-v-b4a4150f"]]),rn=H({__name:"Tooltip",props:{defaultOpen:{type:Boolean},open:{type:Boolean},delayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},emits:["update:open"],setup(e,{emit:s}){const t=Ft(e,s);return(r,a)=>(I(),R(d(ns),Fe(Ve(d(t))),{default:b(()=>[me(r.$slots,"default")]),_:3},16))}}),an=H({inheritAttrs:!1,__name:"TooltipContent",props:{forceMount:{type:Boolean},ariaLabel:{},asChild:{type:Boolean},as:{},side:{},sideOffset:{default:4},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},class:{}},emits:["escapeKeyDown","pointerDownOutside"],setup(e,{emit:s}){const n=e,o=s,t=Y(()=>{const{class:a,...l}=n;return l}),r=Ft(t,o);return(a,l)=>(I(),R(d(os),null,{default:b(()=>[h(d(ss),Nt({...d(r),...a.$attrs},{class:d(Ut)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n.class)}),{default:b(()=>[me(a.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),ln=H({__name:"TooltipTrigger",props:{asChild:{type:Boolean},as:{}},setup(e){const s=e;return(n,o)=>(I(),R(d(rs),Fe(Ve(s)),{default:b(()=>[me(n.$slots,"default")]),_:3},16))}}),cn=H({__name:"TooltipProvider",props:{delayDuration:{},skipDelayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},setup(e){const s=e;return(n,o)=>(I(),R(d(as),Fe(Ve(s)),{default:b(()=>[me(n.$slots,"default")]),_:3},16))}}),un=On("userListPageStore",()=>{const e=S(!1),s=S(!1);return{isOpenNotifyCrawl:e,isOpenNotifyExport:s}}),Vo=window.setInterval,Yo={class:"search flex justify-between items-center min-h-[80px] !px-[25px] max-lg:!px-[10px] max-lg:flex-col max-lg:gap-5 max-lg:justify-start"},Ho={class:"office flex gap-5 items-center font-medium w-full"},zo={class:"date w-full"},Ko={class:"flex relative gap-5 pr-[20px]"},Go={key:0,class:"absolute top-[5px] right-[-7px]"},qo={class:"text-[12px]"},Jo={key:1,class:"absolute top-[36px] left-[-30px] text-[10px] w-[200px]"},Qo=H({__name:"index",emits:["update:officeId","update:targetYearMonth"],setup(e,{emit:s}){const n=Nn(),o=we(),t=un(),r=Ue(),a=S(""),l=S(""),c=S(!1),i=S(null),p=s,_=async()=>{await r.searchLastJob(),i.value||(i.value=Vo(async()=>{await r.searchLastJob()},3e4))},y=()=>{i.value&&(clearInterval(i.value),i.value=null)};ae(()=>{_()}),Rn(()=>{y()});const g=Y(()=>r.job),k=Y(()=>{const E=n.getLocalStorage(Ee.officeName),C=o.offices.map(j=>j.officeName);return E&&C.length&&C.includes(E)&&(a.value=E),!E&&C[0]&&(a.value=C[0],n.setLocalStorage(Ee.officeName,C[0])),C}),w=Y(()=>{var E;return a.value&&n.setLocalStorage(Ee.officeName,a.value),(E=o.offices.find(C=>C.officeName===a.value))==null?void 0:E.id});z(w,()=>{p("update:officeId",w.value)}),z(l,()=>{p("update:targetYearMonth",l.value)});const v=async()=>{c.value=!0;try{const E=await o.crawlCompanyUserStatus();await r.searchLastJob(),E!=null&&E.data&&(t.isOpenNotifyCrawl=!0,setTimeout(()=>{window.location.reload()},3500))}catch(E){console.error(E)}finally{c.value=!1}},N=E=>{const C=E.status===1?E.createdAt:E.updatedAt;return C?ve(C,"YYYY/MM/DD HH:mm"):""};return(E,C)=>{var ie;const j=Po,Q=Fo,$=Vt,B=ln,q=an,X=rn,U=cn;return I(),A("div",Yo,[m("div",Ho,[C[2]||(C[2]=m("span",{class:"label"},"事業所",-1)),h(j,{width:"300px",options:d(k),"value-selected":d(a),"onUpdate:selectedValue":C[0]||(C[0]=M=>a.value=M)},null,8,["options","value-selected"])]),m("div",zo,[h(Q,{title:"表示年月","onUpdate:selectedDate":C[1]||(C[1]=M=>l.value=M)})]),m("div",Ko,[h($,{onClick:v,disabled:d(g)&&d(g).status===1,class:"w-[80px] flex items-center justify-center"},{default:b(()=>[d(c)?(I(),R(d(Yt),{key:0,class:"w-4 h-4 mr-2 animate-spin flex-shrink-0"})):J("",!0),C[3]||(C[3]=K("更新 "))]),_:1},8,["disabled"]),((ie=d(g))==null?void 0:ie.status)==2?(I(),A("div",Go,[h(U,null,{default:b(()=>[h(X,null,{default:b(()=>[h(B,null,{default:b(()=>[h(d(ds),{class:"w-[22px] h-[22px] border rounded-full border-red-500 text-red-500 p-[2px] cursor-pointer"})]),_:1}),h(q,{class:"mb-2 mr-2"},{default:b(()=>{var M;return[m("p",qo,O((M=d(g))==null?void 0:M.errorMessage),1)]}),_:1})]),_:1})]),_:1})])):J("",!0),d(g)&&d(g).createdAt?(I(),A("div",Jo," 最終更新："+O(N(d(g))),1)):J("",!0)])])}}}),Wo=le(Qo,[["__scopeId","data-v-eea35f88"]]),Xo={class:"flex flex-col items-center"},Zo={class:"grid grid-cols-5 gap-2 mb-4"},er=["onClick"],tr=H({__name:"character",setup(e){const s=we(),n=S(mt.map(l=>({...l,selected:!1}))),o=Y(()=>s.userNameKana);z(o,()=>{const l=s.charactersSelected.length>0;n.value=mt.map(c=>{var p;const i=(p=o.value)==null?void 0:p.some(_=>_.startsWith(c.label)||_.startsWith(c.label2));return{...c,disabled:!i,selected:l?s.charactersSelected.includes(`${c.label}, ${c.label2}`):!1}})});const t=l=>l.disabled?"h-[25px] w-[25px] bg-gray-400 text-white rounded-md cursor-not-allowed ":l.selected?"h-[25px] w-[25px] border border-blue-500 text-blue-500 rounded-md ":"h-[25px] w-[25px] border border-black rounded-md hover:bg-gray-100 ",r=l=>{l.disabled||(l.selected=!l.selected),s.charactersSelected=n.value.filter(c=>c.selected).map(c=>`${c.label}, ${c.label2}`)},a=()=>{n.value.forEach(l=>{l.selected=!1}),s.charactersSelected=[]};return(l,c)=>(I(),A("div",Xo,[m("div",Zo,[(I(!0),A(oe,null,re(d(n),(i,p)=>(I(),A("button",{key:p,class:G(t(i)),onClick:_=>r(i)},O(i.label),11,er))),128))]),m("button",{class:"py-2 px-4 border border-black rounded-full text-black hover:bg-gray-200",onClick:a}," 条件クリア ")]))}}),nr=le(tr,[["__scopeId","data-v-e901fe4f"]]),sr=H({__name:"status",props:{cssStyle:{},type:{},selectedStatus:{}},emits:["filterStatus"],setup(e,{emit:s}){const n=e,{type:o}=Bt(n),t=S(n.selectedStatus),r={0:"未実行",1:"実行予定",2:"実行済み",3:"実行エラー"},a=s,l=Object.entries(r).map(([c,i])=>({id:Number(c),value:i}));return z(()=>n.selectedStatus,c=>{t.value=c}),z(t,()=>{a("filterStatus",{status:t.value,type:o.value})}),(c,i)=>{const p=bs,_=xs,y=Ss,g=ws,k=Cs;return I(),A("div",{class:G(c.cssStyle)},[h(k,{modelValue:d(t),"onUpdate:modelValue":i[0]||(i[0]=w=>te(t)?t.value=w:null)},{default:b(()=>[h(_,{class:"w-full"},{default:b(()=>[h(p,{placeholder:""})]),_:1}),h(g,null,{default:b(()=>[h(y,{value:"999"},{default:b(()=>i[1]||(i[1]=[K("すべて")])),_:1}),(I(!0),A(oe,null,re(d(l),w=>(I(),R(y,{value:`${w.id}`},{default:b(()=>[K(O(w.value),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:1},8,["modelValue"])],2)}}}),or={key:0,class:"absolute w-full h-full bg-[#f7f5f505] flex justify-center items-center z-50"},rr=["innerHTML"],ar=H({__name:"notify-handle-export",props:{isOpenNotify:{type:Boolean,default:!1},htmlMessage:{type:String,default:""},isError:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:s}){const n=e,o=s;return z(()=>n.isOpenNotify,t=>{t&&setTimeout(()=>{o("close")},3e3)}),(t,r)=>e.isOpenNotify?(I(),A("div",or,[m("div",{class:G(["bg-[#b5b5b5e6] py-[24px] px-[50px] gap-[8px] rounded-[30px]",{"bg-[#ead3d3]":e.isError}])},[m("div",{class:"flex flex-col items-center",innerHTML:e.htmlMessage},null,8,rr)],2)])):J("",!0)}}),lr={class:"table-container overflow-auto border-b"},ir={class:"w-full table-fixed"},cr={class:"pl-5"},ur=H({__name:"confirm-create-report",props:{users:{type:Array,default:()=>[]},isOpen:{type:Boolean,default:!1}},emits:["close","export"],setup(e,{emit:s}){const n=e,o=S(n.isOpen);z(()=>n.isOpen,c=>{o.value=c});const t=S(!1),r=s,a=()=>{r("close")},l=()=>{t.value=!0,r("export"),setTimeout(()=>{t.value=!1,r("close")},1e3)};return(c,i)=>{const p=Lt,_=At,y=Is,g=Pt,k=An,w=jt,v=Ot,N=Rt;return I(),R(N,{open:d(o),"onUpdate:open":i[0]||(i[0]=E=>te(o)?o.value=E:null)},{default:b(()=>[h(v,null,{default:b(()=>[h(_,{class:"flex flex-col gap-4 items-center"},{default:b(()=>[h(p,{class:"text-sm"},{default:b(()=>i[1]||(i[1]=[K("実行の確認")])),_:1})]),_:1}),h(y,null,{default:b(()=>i[2]||(i[2]=[m("span",null,"以下を実行します、よろしいですか？",-1)])),_:1}),m("div",lr,[m("table",ir,[i[5]||(i[5]=m("thead",{class:"bg-[#adadad] sticky top-0 z-10"},[m("tr",{class:"border border-[#adadad]"},[m("th",{class:"py-3 w-[50%]"},[m("span",{class:"flex items-center justify-center px-4 text-black border-white border-r-2"},"利用者")]),m("th",{class:"py-3 w-[25%]"},[m("span",{class:"flex items-center justify-center px-4 text-black border-white border-r-2"},"報告書")]),m("th",{class:"py-3 w-[25%]"},[m("span",{class:"flex items-center justify-center px-4 text-black"},"計画書")])])],-1)),m("tbody",null,[(I(!0),A(oe,null,re(e.users,(E,C)=>(I(),A("tr",{key:C,class:"h-10 hover:cursor-pointer hover:bg-[#cfcfcf47] border border-gray-300"},[m("td",null,[m("span",cr,O(E.nameKanji),1)]),m("td",{class:G(E.reportStatus===99?"visible":"invisible")},i[3]||(i[3]=[m("span",{class:"text-center flex justify-center bg-[#ccc] py-[8px] mx-[5px] rounded"},"実行",-1)]),2),m("td",{class:G(E.planStatus===99?"visible":"invisible")},i[4]||(i[4]=[m("span",{class:"text-center flex justify-center bg-[#ccc] py-[8px] mx-[5px] rounded"},"実行",-1)]),2)]))),128))])])]),h(w,{class:"flex !flex-col gap-4"},{default:b(()=>[h(g,{class:"flex self-center min-w-[120px]",onClick:l},{default:b(()=>[d(t)?(I(),R(d(Yt),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):J("",!0),i[6]||(i[6]=K("実行"))]),_:1}),h(k,{class:"flex self-center border border-gray-300 min-w-[120px]",onClick:a},{default:b(()=>i[7]||(i[7]=[K("キャンセル")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}}),dr=le(ur,[["__scopeId","data-v-04b4db2b"]]),fr={class:"user-container flex flex-col gap-2 overflow-hidden"},pr={class:"action flex justify-between pr-5 max-lg:flex-col max-lg:gap-5"},mr={class:"flex gap-4 items-center"},hr={class:"relative w-full max-w-[220px] items-center justify-center"},gr={class:"absolute start-0 inset-y-0 flex items-center justify-center px-2"},yr={class:"flex items-center gap-2"},vr={id:"toggle-report-element",class:"flex! items-center justify-center space-x-2 absolute duration-10 ease-linear whitespace-nowrap top-0"},_r={id:"toggle-plan-element",class:"flex! items-center justify-center space-x-2 absolute duration-10 ease-linear whitespace-nowrap top-0"},br={class:"w-full flex relative flex-col mt-[35px]"},xr={class:"w-full table-fixed",id:"table-user"},Sr={class:"sticky top-0 z-10"},wr={class:"bg-[#afeeee] mt-[20px]"},Cr=["id"],kr=["onClick"],Tr={key:0},Ir=["colspan"],Er={key:0},Dr={key:1},Mr=["innerHTML"],$r=["innerHTML"],Lr=["onClick"],Ar=["onClick"],Pr={class:"flex justify-end mr-[35px]"},V=99,jr=H({__name:"index",props:{officeId:{type:Number},targetYearMonth:{type:String}},setup(e,{expose:s}){const n=e,{officeId:o,targetYearMonth:t}=Bt(n),r=we(),a=un(),l=Ue(),c=S(""),i=S(""),p=S(!1),_=S(!1),y=S(!1),g=S(!1),k=S(!0),w=S("999"),v=S("999"),N=S([]),E=[{label:"利用者",width:"16%",key:"nameKanji",isSort:!0},{label:"生年月日",width:"12%",key:"birthday",isSort:!0},{label:"報告書",width:"12%",key:"reportStatus",isSort:!1},{label:"実行日時",width:"15%",key:"reportDate",isSort:!1},{label:"計画書",width:"12%",key:"planStatus",isSort:!1},{label:"実行日時",width:"15%",key:"planDate",isSort:!1},{label:"報告書",width:"9%",key:"actionReport",isSort:!1},{label:"計画書",width:"9%",key:"actionPlan",isSort:!1}],C={0:"未実行",1:"実行予定",2:"実行済み",3:"実行エラー"},j=S(Bn),Q=S(ht),$=S(!1),B=Y(()=>r.isLoadCompanyUsers),q=Y(()=>r.charactersSelected),X=Y(()=>r.isHaveDataCompanyUsers),U=Y(()=>r.companyUsers),ie=Y(()=>l.notify),M=S([]);z(U,()=>{_.value=!1,y.value=!1,M.value=he()}),z([c,q,i],()=>{M.value=he()}),z(M,f=>{const u=f.some(x=>x.reportStatus===V||x.planStatus===V);k.value=!u}),z([w,v],()=>{M.value=he()});const he=f=>{let u=f??[...U.value];return c.value&&(u=bn(u)),q.value.length&&(u=pn(u)),i.value&&(u=mn(u)),(w.value!=="999"||v.value!=="999")&&(u=dn(u)),u},Je=({status:f,type:u})=>{u==="report"&&(w.value=f),u==="plan"&&(v.value=f)},dn=f=>{const u=Number(w.value),x=Number(v.value);return f.filter(T=>u!==999&&x!==999?T.reportStatus===u&&T.planStatus===x:u!==999?T.reportStatus===u:x!==999?T.planStatus===x:!0)},fn=()=>{!y.value?(M.value=hn(M.value),_.value&&Ie(_.value)):(M.value=M.value.map(u=>{var x;return{...u,reportStatus:((x=U.value.find(T=>T.id===u.id))==null?void 0:x.reportStatus)??0}}),_.value=!1,Ie(_.value))},Ie=f=>{(f!==void 0?f:!_.value)?M.value=gn(M.value):(M.value=M.value.map(x=>{var T;return{...x,planStatus:((T=U.value.find(L=>L.id===x.id))==null?void 0:T.planStatus)??0}}),M.value=he(M.value))},pn=f=>f.filter(u=>q.value.some(x=>{const[T,L]=x.split(",");return u.nameKana.startsWith(T.trim())||u.nameKana.startsWith(L.trim())})),mn=f=>f.filter(u=>u.nameKanji.includes(i.value)),hn=f=>f.map(u=>({...u,reportStatus:u.reportStatus===0||u.reportStatus===3?V:u.reportStatus})),gn=f=>f.map(u=>({...u,planStatus:(u.planStatus===0||u.planStatus===3)&&u.reportStatus!==0&&u.reportStatus!==3?V:u.planStatus})),Qe=f=>f?f===1||f===V?C[1]:f===2?C[2]:f===3?C[3]:C[0]:C[0],We=f=>{f||(f=0);let u="flex justify-center items-center py-2 ml-2 rounded-sm ";switch(f){case 0:u+="bg-[#d4e9d3]";break;case 1:case V:u+="bg-[#fff3cb]";break;case 2:u+="bg-[#d9e8fc]";break;case 3:u+="bg-[#f8cecb]";break}return u},yn=f=>{f||(f=0);let u="flex justify-center items-center py-2 ml-2 rounded-sm mx-1 ";switch(f){case 0:case 3:u+=ne.value?"border border-gray-300 bg-[#ccc] opacity-50 cursor-not-allowed":"border border-gray-300 hover:bg-[#faeded]";break;case 1:u+="bg-[#afeeed] cursor-not-allowed";break;case 2:u+="bg-[#ccc] cursor-not-allowed";break;case V:u+="bg-[#afeeed] hover:bg-[#77f6f4]";break}return u},vn=f=>{const u=f.reportStatus??0,x=f.planStatus??0;let T="flex justify-center items-center py-2 ml-2 rounded-sm mx-1 ";switch(x){case 0:case 3:T+=[V,1,2].includes(u)&&!ne.value?"border border-gray-300 hover:bg-[#faeded]":"border border-gray-300 bg-[#ccc] opacity-50 cursor-not-allowed";break;case 1:T+="bg-[#afeeed] cursor-not-allowed";break;case 2:T+="bg-[#ccc] cursor-not-allowed";break;case V:T+="bg-[#afeeed] hover:bg-[#77f6f4]";break}return T},_n=f=>{if(!f.isSort)return;const[u,x]=c.value.split(":"),T=u===f.key?x===ee.ASC?ee.DESC:"":ee.ASC;c.value=T?`${f.key}:${T}`:""},bn=f=>{const[u,x]=c.value.split(":");return f.sort((T,L)=>{const P=T[u],F=L[u];if(typeof P=="number"&&typeof F=="number")return x===ee.DESC?F-P:P-F;if(typeof P=="string"&&typeof F=="string"){const W=new Date(P),Z=new Date(F);return!isNaN(W.getTime())&&!isNaN(Z.getTime())?x===ee.DESC?Z.getTime()-W.getTime():W.getTime()-Z.getTime():x===ee.DESC?F.localeCompare(P):P.localeCompare(F)}return 0})},xn=f=>{var P;if(ne.value)return;const{id:u,reportStatus:x}=f;if(![0,3,V].includes(x))return;const T=((P=U.value.find(F=>F.id===u))==null?void 0:P.reportStatus)??0,L=x===V?T:V;M.value=M.value.map(Sn(f.id,L)),L!=V&&Xe(f,!0)},Xe=(f,u)=>{var W;if(ne.value)return;const{id:x,planStatus:T,reportStatus:L}=f;if(![0,3,V].includes(T)||[0,3].includes(L))return;const P=((W=U.value.find(Z=>Z.id===x))==null?void 0:W.planStatus)??0;if(u){M.value=M.value.map(Ze(f.id,P));return}const F=T===V?P:V;M.value=M.value.map(Ze(f.id,F))},Sn=(f,u)=>x=>x.id===f?{...x,reportStatus:u}:x,Ze=(f,u)=>x=>x.id===f?{...x,planStatus:u}:x,wn=()=>{N.value=M.value.filter(f=>f.reportStatus===99||f.planStatus===99),p.value=!0},Cn=async()=>{var x;l.clearNotify(),r.isLoadCompanyUsers=!0;const f=N.value.map(T=>{const{id:L}=T,P=T.reportStatus===99?1:0,F=T.planStatus===99?1:0;return{id:L,isExecuteReport:P,isExecutePlan:F}});if(!(o!=null&&o.value)||!(t!=null&&t.value))return;const u={officeId:o==null?void 0:o.value,targetYearMonth:t==null?void 0:t.value,users:f};if(await r.bulkExportReport(u),(x=ie.value)!=null&&x.message){Q.value=`
      <span class="text-red-500">${ie.value.message}</span>
    `,$.value=!0,a.isOpenNotifyExport=!0,r.isLoadCompanyUsers=!1;return}await r.getCompanyUseStatus({officeId:o==null?void 0:o.value,targetYearMonth:t==null?void 0:t.value}),r.isLoadCompanyUsers=!1,Q.value=ht,a.isOpenNotifyExport=!0},et=S(),tt=S(),nt=S(),st=S(),ot=S(),rt=S(),at=S(),lt=S(),it=S(),ct=S(),kn=S(0);ae(()=>{var f;et.value=document.getElementById("select-report-element"),tt.value=document.getElementById("column-3"),nt.value=document.getElementById("select-plan-element"),st.value=document.getElementById("column-5"),ot.value=document.getElementById("toggle-report-element"),rt.value=document.getElementById("column-7"),at.value=document.getElementById("toggle-plan-element"),lt.value=document.getElementById("column-8"),it.value=document.getElementById("table-user"),ct.value=(f=it.value)==null?void 0:f.getBoundingClientRect(),ge(),window.addEventListener("resize",ge)});const ge=()=>{const f=ct.value,u=[{element:et.value,column:tt.value,position:35},{element:nt.value,column:st.value,position:35},{element:ot.value,column:rt.value,position:30},{element:at.value,column:lt.value,position:30}],x=()=>{u.forEach(({element:T,column:L,position:P})=>{Tn(T,L,P,f)})};x(),setTimeout(x,50)},Tn=(f,u,x,T)=>{if(!f||!u)return;const L=u.getBoundingClientRect();f.style.left=`${L.left+window.scrollX}px`,f.style.top=`${L.top+window.scrollY-x}px`,f.style.width=`${L.width-2}px`,T&&T.left>L.left||window.innerWidth-L.left-L.width<5?(f.style.zIndex="-1",f.style.display="none"):(f.style.zIndex="5",f.style.display="flex")},In=f=>{f.target.scrollLeft!==kn.value&&ge()};Un(()=>{ge()});const En=Y(()=>l.isLoadPermission),ne=Y(()=>(En.value,!(Pn(t==null?void 0:t.value)&&$e())));return s({resetFilterTable:f=>{f&&(i.value="",w.value="999",v.value="999",c.value=""),g.value=!1}}),(f,u)=>{const x=Yn,T=_s,L=sr,P=ks,F=ln,W=an,Z=rn,ut=cn,Dn=Ts,dt=ar,Mn=Vt,$n=dr,Ln=ps;return I(),A("div",fr,[m("div",pr,[m("div",mr,[m("div",hr,[h(x,{id:"search",type:"text",placeholder:"Search",class:"pl-10",modelValue:d(i),"onUpdate:modelValue":u[0]||(u[0]=D=>te(i)?i.value=D:null)},null,8,["modelValue"]),m("span",gr,[h(d(fs),{class:"w-4 h-4 text-muted-foreground"})])]),m("div",yr,[h(T,{id:"terms",checked:d(g),"onUpdate:checked":u[1]||(u[1]=D=>te(g)?g.value=D:null)},null,8,["checked"]),u[9]||(u[9]=m("span",{for:"terms",class:"flex text-xs flex-shrink-0"}," 和暦表示 ",-1))])])]),h(L,{id:"select-report-element",cssStyle:"absolute duration-10 ease-linear whitespace-nowrap top-0",type:"report","selected-status":d(w),onFilterStatus:Je},null,8,["selected-status"]),h(L,{id:"select-plan-element",cssStyle:"absolute duration-10 ease-linear whitespace-nowrap top-0",type:"plan","selected-status":d(v),onFilterStatus:Je},null,8,["selected-status"]),m("div",vr,[h(P,{disabled:d(ne),checked:d(y),"onUpdate:checked":u[2]||(u[2]=D=>te(y)?y.value=D:null),onClick:u[3]||(u[3]=()=>fn())},null,8,["disabled","checked"]),u[10]||(u[10]=m("span",null,"一括",-1))]),m("div",_r,[h(P,{disabled:d(ne),checked:d(_),"onUpdate:checked":u[4]||(u[4]=D=>te(_)?_.value=D:null),onClick:u[5]||(u[5]=()=>Ie())},null,8,["disabled","checked"]),u[11]||(u[11]=m("span",null,"一括",-1))]),m("div",br,[m("div",{class:G(["table-container overflow-auto border-b",{"border-l":d(M).length}]),onScroll:In},[m("table",xr,[m("thead",Sr,[m("tr",wr,[(I(),A(oe,null,re(E,(D,ce)=>m("th",{class:"py-3",id:`column-${ce+1}`,key:ce,style:Le({width:D.width})},[m("span",{class:G(["flex items-center justify-center px-4 text-black border-white hover:cursor-pointer ",ce<E.length-1?"border-r-2":""]),onClick:ft=>_n(D)},[K(O(D.label)+" ",1),d(c)&&d(c).split(":")[1]==("SORT"in f?f.SORT:d(ee)).ASC&&D.key==d(c).split(":")[0]?(I(),R(d(ms),{key:0,width:"12",height:"12",class:"ml-1 hover:text-[#5566da]"})):J("",!0),d(c)&&d(c).split(":")[1]==("SORT"in f?f.SORT:d(ee)).DESC&&D.key==d(c).split(":")[0]?(I(),R(d(hs),{key:1,width:"12",height:"12",class:"ml-1 hover:text-[#5566da]"})):J("",!0)],10,kr)],12,Cr)),64))])]),m("tbody",null,[d(M).length===0&&!d(X)?(I(),A("tr",Tr,[m("td",{class:"text-center py-3 text-[#5566da]",colspan:E.length},O(("MESSAGES"in f?f.MESSAGES:d(Fn)).EMPTY),9,Ir)])):(I(!0),A(oe,{key:1},re(d(M),(D,ce)=>(I(),A("tr",{class:G(["bg-white dark:bg-gray-800 text-center h-10 hover:cursor-pointer hover:bg-[#afe7ee47]",[ce<d(M).length-1?"border-b":""]])},[m("td",null,[m("span",null,O(D.nameKanji),1)]),m("td",null,[d(g)?(I(),A("span",Er,O(("formatToJapaneseEra"in f?f.formatToJapaneseEra:d(gs))(D.birthday)),1)):(I(),A("span",Dr,O(("formatDate"in f?f.formatDate:d(ve))(D.birthday,"YYYY/MM/DD")),1))]),m("td",null,[m("span",{class:G(["px-[18px] py-[8px] rounded-sm",We(D.reportStatus)])},[K(O(Qe(D.reportStatus))+" ",1),D.reportErrorMessage?(I(),R(ut,{key:0},{default:b(()=>[h(Z,null,{default:b(()=>[h(F,null,{default:b(()=>[h(d(gt),{width:"16",height:"16",class:"ml-[5px] hover:text-[#5566da] text-[red]"})]),_:1}),h(W,null,{default:b(()=>[m("p",{innerHTML:D.reportErrorMessage},null,8,Mr)]),_:2},1024)]),_:2},1024)]),_:2},1024)):J("",!0)],2)]),m("td",null,[m("span",null,O(("formatDate"in f?f.formatDate:d(ve))(D.reportDate,"YYYY/MM/DD HH:mm")),1)]),m("td",null,[m("span",{class:G(["px-[18px] py-[8px] rounded-sm",We(D.planStatus)])},[K(O(Qe(D.planStatus))+" ",1),D.planErrorMessage?(I(),R(ut,{key:0},{default:b(()=>[h(Z,null,{default:b(()=>[h(F,null,{default:b(()=>[h(d(gt),{width:"16",height:"16",class:"ml-[5px] hover:text-[#5566da] text-[red]"})]),_:1}),h(W,null,{default:b(()=>[m("p",{class:"text-[12px]",innerHTML:D.planErrorMessage},null,8,$r)]),_:2},1024)]),_:2},1024)]),_:2},1024)):J("",!0)],2)]),m("td",null,[m("span",null,O(("formatDate"in f?f.formatDate:d(ve))(D.planDate,"YYYY/MM/DD HH:mm")),1)]),m("td",null,[m("span",{class:G(yn(D.reportStatus)),onClick:ft=>xn(D)},"実行",10,Lr)]),m("td",null,[m("span",{class:G(vn(D)),onClick:ft=>Xe(D)},"実行 ",10,Ar)])],2))),256))])])],34),d(B)?(I(),R(Dn,{key:0})):J("",!0),h(dt,{"is-open-notify":d(a).isOpenNotifyCrawl,"html-message":d(j),onClose:u[6]||(u[6]=D=>d(a).isOpenNotifyCrawl=!1)},null,8,["is-open-notify","html-message"]),h(dt,{"is-open-notify":d(a).isOpenNotifyExport,"html-message":d(Q),"is-error":d($),onClose:u[7]||(u[7]=D=>{d(a).isOpenNotifyExport=!1,$.value=!1})},null,8,["is-open-notify","html-message","is-error"]),m("div",Pr,[h(Mn,{disabled:d(k)||d(ne),class:"flex justify-end mt-[30px]",onClick:wn},{default:b(()=>u[12]||(u[12]=[K(" 実行開始 ")])),_:1},8,["disabled"])])]),h($n,{isOpen:d(p),users:d(N),onClose:u[8]||(u[8]=()=>p.value=!1),onExport:Cn},null,8,["isOpen","users"]),h(Ln,{class:"top-[5px]"})])}}}),Or=le(jr,[["__scopeId","data-v-649da4d2"]]),Rr={class:"user-list px-4"},Nr={class:"relative header flex items-center h-[40px] border-b border-b-[#e2e2e2]"},Br={class:"body-content flex py-4 w-full gap-2"},oa=H({__name:"index",setup(e){const s=we(),n=S(void 0),o=S(""),t=S(),r=i=>{var p;t.value&&((p=t.value)==null||p.resetFilterTable(!0)),n.value=i,c(!0)},a=i=>{var p;t.value&&((p=t.value)==null||p.resetFilterTable(!1)),o.value=i,c(!1)},l=i=>{const[p,_]=i.split("/");return`${p}-${_}-01`},c=i=>{n.value&&o.value&&s.getCompanyUseStatus({officeId:n.value,targetYearMonth:l(o.value)},i)};return ae(()=>{c(!0)}),(i,p)=>{const _=Es,y=Hn,g=Wo,k=nr,w=Or;return I(),A("div",Rr,[h(_),m("div",Nr,[p[0]||(p[0]=m("span",{class:"text-base font-bold"},"利用者選択",-1)),h(y,{"class-custom":"absolute z-10 bg-[#ccc] w-[100%] top-[40px]  py-[11px]",type:"custom"})]),h(g,{"onUpdate:officeId":r,"onUpdate:targetYearMonth":a}),m("div",Br,[h(k,{class:"px-5 py-10 min-w-[230px]"}),h(w,{class:"w-full",ref_key:"userTableComponentRef",ref:t,"office-id":d(n),"target-year-month":l(d(o))},null,8,["office-id","target-year-month"])])])}}});export{oa as default};
